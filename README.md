## Тестовый стенд для проверки магазинов

### Запуск

Все CMS сразу:

1) `./run.sh`
2) в браузере http://127.0.0.1 (прямо на 80 порту)

Для запуска отдельных CMS: `docker-compose up --build <name>`.

Адрес, по которому можно открыть CMS, можно найти в следующих местах:
  * в [http://localhost/](), если вы запускали `run.sh`
  * можно запустить `make hosts` и либо просто увидеть адрес, либо сохранить содержимое в /etc/hosts, чтобы далее обращаться к CMS по осмысленным именам.


### Заметки
1) всё в nginx папками (по возможности). Из `nginx/locations/*.conf`

2) всё в мускуле, при запуске запускаются `mysql/init/*.sql`

3) есть и php5, и php7, можно один или другой подключать (см. пункт 1)

4) все папки шарятся в `/private/var/lib/docker-volumes/*` (из-за Docker for OS X)

5) проекты внутри контейнера ставлятся в /opt/XXX, а при старте контейнера в entrypoint через `rsync -a` (реально быстрее чем cp) в уже примонтированную общую папку `/var/www/`

В качестве эксперимента opencart и prestashop запускаются с помощью dev-сервера PHP (контейнеры с nginx и php-fpm не подключаются). Эти CMS открываются по следующим адресам:

  * Opencart: [http://172.100.0.10]()
  * Prestashop: [http://172.100.0.11]()


### Callback_url

Для подтверждения платежей есть 3 варианта:

1) поднять всё контейнеры не локально, а на сервере, и прописать в личном кабинете callback_url

2) протянуть пути наружу через https://ngrok.com/ и прописать в личном кабинете callback_url

3) запустить локально 
```
python3 test_success_payment.py URL ORDER_ID AMOUNT
```

Зависимости:
```
pip3 install requests click
```