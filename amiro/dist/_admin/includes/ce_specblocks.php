<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       6431 xkqwquyqsulwsgnmkkqlumykuzktizsymlsrzmmklizzsmtwkxqzyypknqyyuttyzknypnir
 */ ?><?php foreach(array(20731=>'HYL',20732=>'ZSIMn|rHHt',20733=>"DGQW|YJHWKD",20734=>'IHSuJQ',20735=>'GIZnZPQr',20736=>'DGQW|IHSuJQ|YHSB',20737=>'PrHuG',20738=>'IHSuJQD',20739=>'MnDtZJJQS',20740=>"tZP|rQZJ",20741=>"SMDZYJQS",20742=>"ZSIMn|rHHt",20743=>'MJZnP',20744=>'YJHWK',20745=>'|DGQWYJHWK',20746=>"|",20747=>'DGQW|YJHWKD|',20748=>"HCnQr",20749=>"GIZnZPQr",20750=>"IHSuJQD",20751=>"GJuPMnD",20752=>"DGQJJ|MnDtZJJQS") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $l1IIllL =true; require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .files_subpath .'init.php'; $Core->Cache->SetDebug(false); if (isset($adm->VarsGet[I20731])) {$obj_name =$adm->VarsGet[I20731]; }else {die; }$adm->Gui->delScript(); $adm->Gui->addScript($ADMIN_PATH_WWW ."jsapi.php"); $adm->Gui->addScript($ADMIN_PATH_WWW .$GLOBALS['CURRENT_SKIN_PATH'] ."_js/ami.admin.js"); if (!isset($l1Il1Ll)) {$l1Il1Ll =array(); }$l1Il1Ll += array( 'www_root' => $ROOT_PATH_WWW, I20732 => $ADMIN_PATH_WWW, 'obj_name' => $obj_name, 'metas' => $adm->Gui->getMetas(), 'scripts' => $adm->Gui->getScripts() );$llIILII =$adm->Gui->ParseLangFile("templates/lang/ce_specblocks.lng"); $IlIILLI =array( $LOCAL_FILES_REL_PATH .'_admin/templates/lang/_ce_specblocks_msgs.lng', $LOCAL_FILES_REL_PATH .'_admin/templates/lang/ce_specblocks.lng' );foreach ($IlIILLI as $path) {if ($adm->Gui->isValidFile($path)) {$l1ILLL1 =$adm->Gui->ParseLangFile($path); if (is_array($l1ILLL1)) {$llIILII += $l1ILLL1; }}}if ($adm->Core->IsInstalled('plugins_wizard')) {$llIILII += CMS_InstallablePlugin::TTI1IlI($adm); }$adm->Core->Cache->TT1Tl1I(); $adm->Gui->addBlock("specblocks", "templates/ce_specblocks.tpl"); $SPEC_BLOCKS =$adm->Core->GetProperty(I20733); $Groups =Array(); $Count =Array(); $l1ILL1I =array(); foreach ($SPEC_BLOCKS as $block => $l1ILL1l) {$moduleName =$l1ILL1l[I20734]; if ($moduleName != 'core') {$module =&$adm->Core->GetModule($moduleName); $ownerName =$module->GetOwnerName(); if ($block == 'spec_section_map') {$SPEC_BLOCKS[$block]['group'] ='common'; }}else {$ownerName =I20735; }$SPEC_BLOCKS[$block]['owner'] =$ownerName; $ownerData =$adm->Core->OwnerGetData($ownerName); $l1ILL1I[$ownerName] =$ownerData['menu_name']; }foreach ($SPEC_BLOCKS as $block => $l1ILL1l) {if ($block == I20736) {continue; }$l1ILL1L =""; $l1ILL11 =""; if ($l1ILL1l[I20737] == I20738 && $l1ILL1l[I20739] == 0) {$l1ILL1L ='disabled'; $l1ILL11 =''; }$l1IL1II =array(); $l1IL1II["title"] =$l1ILL11; $l1IL1II["tag"] =$block; $l1IL1II[I20740] =mb_strpos($block, 'spec_small_plugin') !== false ?'spec_small_plugin' :$block; $l1IL1II["name"] =empty($llIILII[$block]) ?"unknown" :$llIILII[$block]; $l1IL1II[I20741] =$l1ILL1L; $l1IL1II["description"] =empty($llIILII[$block ."_desc"]) ?$l1IL1II["name"] :$llIILII[$block ."_desc"]; $l1IL1II[I20742] =$ADMIN_PATH_WWW; $l1IL1II["group"] =$l1ILL1l["group"]; $l1IL1II["owner"] =$l1ILL1l["owner"]; $l1IL1II[I20743] =$adm->Gui->lang; $l1IL1II["img_src"] =AMI_Service::getModResourceURL( 'mod_specblock', array( 'modId' => $l1ILL1l[I20734], 'locale' => $adm->Gui->lang, I20744 => preg_replace(array('/^spec_small_/', '/^spec_/'), '', $block), 'entity' => I20745 )+$l1IL1II );$l1IL1II["img_tag"] =$adm->Gui->getDefPostf("specblocks:spec_img", $l1ILL1L, $l1IL1II); if (isset($l1Il1Ll[I20733 ."_" .$l1ILL1l["owner"]])) {$l1Il1Ll[I20733 .I20746 .$l1ILL1l["owner"]] .= $adm->Gui->getAbs("specblocks:tb_spec_hsplitter", "") ."\n "; }if (!isset($l1Il1Ll[I20747 .$l1ILL1l['owner']])) {$l1Il1Ll[I20747 .$l1ILL1l['owner']] =''; }$l1Il1Ll[I20733 .I20746 .$l1ILL1l["owner"]] .= $adm->Gui->get("specblocks:tb_spec_item", $l1IL1II) ."\n "; $Count[$l1IL1II["owner"]] =isset($Count[$l1IL1II["owner"]]) ?$Count[$l1IL1II["owner"]] +1 :1; if (($Count[$l1IL1II[I20748]] %3 == 0) && isset($l1Il1Ll[I20733 .I20746 .$l1ILL1l[I20748]])) {$l1Il1Ll[I20733 .I20746 .$l1ILL1l[I20748]] .= $adm->Gui->getAbs("specblocks:tb_spec_vsplitter", "") ."\n "; }if (!in_array($l1IL1II[I20748], $Groups)) {$Groups[] =$l1IL1II[I20748]; }}foreach ($Count as $owner => $count) {if (($rest =$count %3) >0) {$l1Il1Ll[I20747 .$owner] .= str_repeat($adm->Gui->getAbs('specblocks:tb_spec_item_empty', array()), 3 -$rest); }}$aOwners =Array(I20749, I20750, "eshop", "kb", "portfolio", "services", I20751); $l1Il1Ll["spec_blocks_custom"] =""; foreach ($Groups as $group) {$l1IL1Il["group_name"] =$l1ILL1I[$group]; $l1IL1Il[I20733] =$l1Il1Ll[I20733 .I20746 .$group]; if (in_array($group, $aOwners)) {$l1Il1Ll["spec_blocks_" .$group] =$adm->Gui->get("specblocks:tb_group_item", $l1IL1Il); }else {$l1Il1Ll["spec_blocks_custom"] .= $adm->Gui->get("specblocks:tb_group_item", $l1IL1Il); }}$l1Il1Ll[I20752] =intval($adm->Core->IsInstalled("spell")); $l1Il1Ll =$adm->Gui->get("specblocks", $l1Il1Ll); echo $l1Il1Ll; $conn->Out(); 