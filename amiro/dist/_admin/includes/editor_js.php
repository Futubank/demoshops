<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       13727 xkqwylygxiikmymrymrmpzxizwwnikntnnkggqusmsqyglyingnmzinusnyuxmqklqwnpnir
 */ ?><?php foreach(array(20860=>'Drv|HGtMHnD',20861=>"DGQJJ|MnDtZJJQS",20862=>"HGtMHnD|MnDtZJJQS",20863=>'ZJJHC|IuJtM|JZnP',20864=>'DIMJQD',20865=>'rHHt|GZtO',20866=>'DIMJQ|WZGtMHn',20867=>'',20868=>'DIMJQD|WHGBrMPOt',20869=>"\\'",20870=>'vZJuQ',20871=>"PrHuG",20872=>"IHSuJQ",20873=>'QDOHG|WZt',20874=>'KY|WZt',20875=>'GHrtfHJMH|WZt',20876=>"",20877=>"IHSuJQD",20878=>"MnDtZJJQS",20879=>'WHrQ',20880=>"?dGQWyJHWKD*",20881=>"'^\n?",20882=>"&*'IHSuJQ'&?=?'",20883=>"&*'MnDtZJJQS'&?=?'",20884=>"DGQW|YJHWK|ZrrZB",20885=>"^\n?",20886=>"nZIQ",20887=>'RhhT|gzTo',20888=>'wURRqNT|dkmN',20889=>'nZIQ',20890=>'`tGJ',20891=>'|tGJ',20892=>'JZnPuZPQ',20893=>'wURRqNT|dkmN|gzTo',20894=>'ZpZSPQtD*\'',20895=>'"!?"',20896=>'tBGQ',20897=>'#~DWr"?-?"MGt',20898=>"\n\n") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} function TlITl1T($str){ return str_replace('/', '\\/', preg_quote($str)); }$l1IIllL =true; $ILlIlIl=1; require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .files_subpath. 'init.php'; $conn->AddHeader("Content-Type: application/x-javascript; charset=UTF-8"); AMI_Service::hideDebug(); $Core->Cache->SetDebug(false); $adm->Core->Cache->TT1Tl1I(); $adm->Gui->addBlock("editor", "templates/ce/editor.tpl"); $vMod =$adm->Core->GetModule(I20860); $l1Il1Ll[I20861] =intval($adm->Core->IsInstalled("spell")); $l1Il1Ll[I20862] =$vMod->IsInstalled() ?"true" :"false"; $l1Il1Ll['allow_multi_lang'] =intval($adm->Core->GetOption(I20863)); $l1Il1Ll['admin_root_q'] =TlITl1T($ADMIN_PATH_WWW); $l1Il1Ll['front_root_q'] =TlITl1T($ROOT_PATH_WWW); $l1Il1Ll["char_set"] ='UTF-8'; $l1Il1Ll[I20864] =''; if(is_file($ROOT_PATH.'_local/config_editor.php')){ $configData =parse_ini_file($ROOT_PATH.'_local/config_editor.php', true); $smilesFolder ='base'; if(is_file($ROOT_PATH.'_mod_files/smiles/current.dat')){ $fileConfig =trim(file_get_contents($ROOT_PATH.'_mod_files/smiles/current.dat')); if(!empty($fileConfig) && is_dir($ROOT_PATH.'_mod_files/smiles/'.$fileConfig)){ $smilesFolder =$fileConfig; }}$counter =0; foreach(array('BASE_SMILES', 'EXTRA_SMILES') as $dataType){ if(is_array($configData[$dataType])){ foreach($configData[$dataType] as $smileName => $smileValue){ $smileName =trim($smileName); $smileValue =trim($smileValue); if(strncmp($smileName, $smilesFolder, mb_strlen($smilesFolder)) == 0){ $smileName =mb_substr($smileName, mb_strlen($smilesFolder)+1); $l1I1ll1 =array( I20865 => $ROOT_PATH_WWW, 'smile_path' => '_mod_files/smiles/'.$smilesFolder.'/'.$smileName.'.gif', I20866 => addslashes($smileValue), 'smile_caption2' => addslashes(addslashes($smileValue)), );$l1Il1Ll[I20864] .= $adm->Gui->get("editor:smile_field", $l1I1ll1); if(++$counter %5 == 0){ $tmp =array(); $l1Il1Ll[I20864] .= $adm->Gui->get("editor:smile_field_splitter", $tmp); }}}}}$l1Il1Ll['smiles_copyright'] =I20867; if(mb_strlen($adm->VarsGet['dlang']) == 2){ $l1I1lLI =$smilesFolder.'_'.$adm->VarsGet['dlang']; if(!empty($configData['SMILES_COPYRIGHTS'][$l1I1lLI])){ $l1Il1Ll[I20868] =addslashes($configData['SMILES_COPYRIGHTS'][$l1I1lLI]); }}}$l1I1lLl =$adm->Gui->parseLangFile($GLOBALS['CURRENT_SKIN_PATH'] .'templates/lang/help.lng'); $l1I1lLL =array(); foreach($l1I1lLl as $key => $value){ $key =trim($key); $value =trim($value); $value =str_replace("'", I20869, $value); $value =str_replace("\n", '\\' ."\n", $value); $aTmp =array( 'key' => $key, I20870 => $value );$l1I1lLL[] =$adm->Gui->get('editor:astItem', $aTmp); }$l1Il1Ll['astContent'] =implode(',', $l1I1lLL); $l1I1lL1 =$adm->Gui->get("editor", $l1Il1Ll); $l1I1l1I =$adm->Gui->ParseLangFile("templates/ce/editor.lng"); $l1I1l1l =$GLOBALS["LOCAL_FILES_REL_PATH"]."_admin/templates/lang/custom_specblocks.lng"; $llIILII =$adm->Gui->ParseLangFile("templates/lang/ce_specblocks.lng"); if($adm->Gui->isValidFile($LOCAL_FILES_REL_PATH."_admin/templates/lang/ce_specblocks.lng")) {$l1ILLL1 =$adm->Gui->ParseLangFile($LOCAL_FILES_REL_PATH."_admin/templates/lang/ce_specblocks.lng"); if(is_array($l1ILLL1)) {$llIILII += $l1ILLL1; }}if($adm->Core->IsInstalled('plugins_wizard')) {$llIILII += CMS_InstallablePlugin::TTI1IlI($adm); }$i =0; $SPEC_BLOCKS =$adm->Core->GetProperty("spec_blocks"); $IILLlLL =$adm->Core->GetOption("spec_blocks_unique"); if($adm->Gui->isValidFile($l1I1l1l)){ $l1I1l1L =$adm->Gui->ParseLangFile($l1I1l1l); foreach ($l1I1l1L as $tag => $name){ $l1I1l11 =sizeof($SPEC_BLOCKS); $SPEC_BLOCKS[$tag]["tag"] =$tag; $SPEC_BLOCKS[$tag][I20871] ="custom"; $SPEC_BLOCKS[$tag][I20872] =""; $llIILII[$tag] =$name; }}$l1Il1Ll =array( 'spec_block_array' => I20867 );$l1I1LII =array( 'spec_eshop_cat' => I20873, 'spec_eshop_special' => 'eshop_item', 'spec_eshop_filter' => I20867, 'spec_kb_cat' => I20874, 'spec_kb_special' => 'kb_item', 'spec_kb_filter' => I20867, 'spec_portfolio_cat' => I20875, 'spec_portfolio_special' => 'portfolio_item', 'spec_portfolio_filter' => I20867, );foreach ($SPEC_BLOCKS as $block => $image){ $l1ILL1L =""; $l1ILL11 =I20876; $l1I1LIl =0; if ($SPEC_BLOCKS[$block][I20871] != I20877){ $l1I1LIl =1; }else{ $l1I1LIl =$SPEC_BLOCKS[$block][I20878]; }if ($l1I1LIl == 0){ $l1ILL1L =" disabled"; $l1ILL11 =$l1I1l1I["spec_block_not_available"]; }$l1Il1Ll["char_set"] ='UTF-8'; $l1I1LIL =I20867; $l1I1LI1 =isset($l1I1LII[$block]) ?$l1I1LII[$block] :$SPEC_BLOCKS[$block][I20872]; if(!empty($l1I1LI1) && $l1I1LI1 != I20879){ $oModule =$adm->Core->GetModule($l1I1LI1); if($oModule->IsAdminAllowed()){ $l1I1LIL =$oModule->GetAdminLink(); }}$l1Il1Ll["spec_block_array"] .= " SpecBlocks[".$i."] = Array();\n "; $l1Il1Ll["spec_block_array"] .= I20880.$i."]['tag'] = '##".$block."##';\n "; $l1Il1Ll["spec_block_array"] .= I20880.$i."]['name'] = '".$block.I20881; $l1Il1Ll["spec_block_array"] .= I20880.$i."]['group'] = '".$SPEC_BLOCKS[$block][I20871].I20881; $l1Il1Ll["spec_block_array"] .= I20880.$i.I20882.$SPEC_BLOCKS[$block][I20872].I20881; $l1Il1Ll["spec_block_array"] .= I20880.$i.I20883.$l1I1LIl.I20881; $l1Il1Ll[I20884] .= I20880.$i."]['caption'] = '".(isset($llIILII[$block]) ?AMI_Lib_String::jParse($llIILII[$block]) :I20867).I20881; $l1Il1Ll[I20884] .= I20880.$i."]['uniq'] = " .(in_array($block, $IILLlLL) ?'true' :'false') .I20885; $l1Il1Ll[I20884] .= I20880.$i."]['link'] = '" .$l1I1LIL .I20881; $l1Il1Ll[I20884] .= I20880.$i."]['hasOptions'] = true;\n "; $l1IL1II["title"] =$l1ILL11; $l1IL1II["tag"] =$block; $l1IL1II[I20886] =isset($llIILII[$block]) ?$llIILII[$block] :I20867; $l1IL1II[I20871] =$SPEC_BLOCKS[$block][I20871]; $l1IL1II["disabled"] =$l1ILL1L; $l1IL1II["img_tag"] =$adm->Gui->get("editor:specblocks_img", $l1IL1II); $i++; }$l1I1LlI =$adm->Gui->get("editor:specblocks_content", $l1Il1Ll); $llllLlL =$adm->Gui->parseLangFile($GLOBALS[I20887] ."_local/_admin/templates/lang/gadgets.lng"); $llllLll =$adm->Gui->parseLangFile($GLOBALS['CURRENT_SKIN_PATH'] .'templates/lang/gadgets.lng'); $llllLl1 =array_merge($llllLll, $llllLlL); unset($llllLll); unset($llllLlL); $l1I1Lll ="// Gadgets\n"; $llllLLI =$GLOBALS[I20888] != 'cross' ?$adm->Core->GetModOption('ce', 'gadgets_allowed') :array(); if(in_array('__ami_all_gadgets', $llllLLI)){ $llllLLI =array(); $l1I1LlL =ModuleVisualEditor::TIl1lIl(); foreach($l1I1LlL as $l1I1Ll1){ $llllLLI[] =$l1I1Ll1[I20889]; }}$l1I1Lll .= "var aGadgets = {};\n"; $l1I1LLI =0; foreach ($llllLLI as $entry){ $llllLLL =array(); $llllLLL[I20889] =$entry; $llllLLL['type'] =is_file($GLOBALS['CURRENT_SKIN_PATH'] .'templates/gadgets/' .$entry .I20890) ?'system' :'users'; $l1I1LLl =$GLOBALS['CURRENT_SKIN_PATH'] .'templates/gadgets/'; $l1I1LLL =$GLOBALS[I20887] .'_local/_admin/templates/gadgets/'; $l1I1LL1 =$llllLLL['type'] == 'system' ?$l1I1LLl :$l1I1LLL; $l1I1L1I =$l1I1LL1 .$llllLLL[I20889] .'.lng'; $l1I1L1l=array(); if(file_exists($l1I1L1I)){ $l1I1L1l =$adm->Gui->parseLangFile($l1I1L1I); $llllLl1 =array_merge($llllLl1, $l1I1L1l); }$adm->Gui->addBlock('g_' .$llllLLL[I20889] .I20891, $l1I1LL1.$llllLLL[I20889] .I20890); $adm->Gui->addBlock('g_' .$llllLLL[I20889] .'_form', $l1I1LL1.$llllLLL[I20889] .'_parameters.tpl'); $t =array(); $template =TlITl1I($adm->Gui->get('g_' .$llllLLL[I20889] .I20891, $t, I20867, $llllLl1, I20892)); $form =TlITl1I($adm->Gui->get('g_' .$llllLLL[I20889] .'_form', $t, I20867, $llllLl1, I20892)); if($llllLLL['type'] == 'system') {$image =(file_exists($GLOBALS[I20893] .'images/gadget_' .$llllLLL[I20889] .'.jpg') ?$ADMIN_PATH_WWW .$GLOBALS[I20893] .'images/gadget_' .$llllLLL[I20889] .'.jpg' :I20867); }else{ $image =(file_exists($GLOBALS[I20887] .'_mod_files/ce_images/gadgets/gadget_' .$llllLLL[I20889] .'.jpg') ?$GLOBALS['ROOT_PATH_WWW'] .'_mod_files/ce_images/gadgets/gadget_' .$llllLLL[I20889] .'.jpg' :I20867); }$l1I1Lll.=I20894 .$llllLLL[I20889] .'\'] = ["'; $l1I1Lll.=$llllLLL[I20889] .'", "'; $l1I1Lll.=addslashes((isset($llllLl1[$llllLLL[I20889]])) ?$llllLl1[$llllLLL[I20889]] :$llllLLL[I20889]) .'", "'; $l1I1Lll.= $llllLLL['type'] .I20895; $l1I1Lll.= $template .I20895; $l1I1Lll.= $form .I20895; $l1I1Lll.= $image .I20895; $l1I1Lll.= (isset($llllLl1[$llllLLL['type'] .'_gadgets']) ?$llllLl1[$llllLLL['type'] .'_gadgets'] :$llllLLL[I20896]) .I20895; $l1I1L1L=$llllLLL[I20889]."_author"; $l1I1Lll.= (isset($llllLl1[$l1I1L1L]) ?$llllLl1[$l1I1L1L] :I20876 ).I20895; $l1I1L1L=$llllLLL[I20889]."_url"; $l1I1Lll.= (isset($llllLl1[$l1I1L1L]) ?$llllLl1[$l1I1L1L] :I20876 ).I20895; $l1I1L1L=$llllLLL[I20889]."_description"; $l1I1Lll.= (isset($llllLl1[$l1I1L1L]) ?$llllLl1[$l1I1L1L] :I20876 ).I20895; $l1I1L1L="gadgets_popup_author_title"; $l1I1Lll.= (isset($llllLl1[$l1I1L1L]) ?$llllLl1[$l1I1L1L] :I20876 ).I20895; $l1I1L1L="gadgets_popup_insert_gadget"; $l1I1Lll.= (isset($llllLl1[$l1I1L1L]) ?$llllLl1[$l1I1L1L] :I20876 );$l1I1Lll.="\"];\n"; $l1I1LLI++; }function TlITl1I($str) {$str =addslashes($str); $str =str_replace('<script', '<scr" + "ipt', $str); $str =str_replace('</script', I20897, $str); $str =str_replace(array("\r", "\n"), array(I20876, '" + "\n" + "'), $str); return $str; }echo $l1I1lL1 ."\n\n" .$l1I1LlI .I20898 .$l1I1Lll; $conn->Out(); 