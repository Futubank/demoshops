<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       2704 xkqwlspnlsuuzlpyrygyuriiyrrqqyxygqsnyymsiyizrxtyltpqzqtrslunxkyysyrmpnir
 */ ?><?php foreach(array(22141=>'GZPQD',22142=>'WZGtMHn') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $l1IIllL =true; $ILlIlIl =1; $l1lIII1 =1; require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .files_subpath .'init.php'; $conn->AddHeader("Content-Type: application/x-javascript; charset=UTF-8"); $Core->Cache->SetDebug(false); $adm->Words =$adm->Gui->ParseLangFile("templates/lang/_menu_all.lng"); $adm->Gui->addBlock('tree_page', 'templates/gettree.tpl'); $l1lII1L ='admin_menu_caption'; $ll1I1I1 =$adm->Gui->getAbs('tree_page:mod_parent_splitter'); $unknown ='unknown'; $aNoShowOwners =$Core->GetModOption('pages', 'dont_show_owners_in_list'); $l1l1Lll =&$Core->GetAllModules(); $IlLlllL =array ();foreach (array_keys($l1l1Lll) as $vModName){ $vMod =&$l1l1Lll[$vModName]; if (!$vMod->IsInstalled() || !$vMod->IsFrontAllowed() || $vMod->issetAndTrueProperty('dont_show_in_pm') || $vModName == I22141) {continue; }$row =array ('name' => $vModName, 'caption' => $GLOBALS['adm']->GetModHeader($vMod, $l1lII1L, $unknown) );$parent =$vMod->GetParentName(); $owner =$vMod->GetOwnerName(); if (!empty($parent)) {$tmpMod =&$l1l1Lll[$parent]; if ($tmpMod->IsInstalled() && $tmpMod->IsFrontAllowed()) {$tmpCaption =$GLOBALS['adm']->GetModHeader($tmpMod, $l1lII1L, $unknown); $row[I22142] =$tmpCaption .$ll1I1I1 .$row[I22142]; $owner =$tmpMod->GetOwnerName(); }}if (!in_array($owner, $aNoShowOwners)) {$tmpName =$Core->OwnerGetData($owner, $l1lII1L); if (empty($tmpName)) {$tmpName =$unknown; }$row[I22142] =$tmpName .$ll1I1I1 .$row[I22142]; }$row[I22142] =addslashes($row[I22142]); $IlLlllL[] =$row; }require_once $GLOBALS['FUNC_INCLUDES_PATH'] .'func_array.php'; sortMultiArray($IlLlllL, I22142); $html =''; foreach ($IlLlllL as $num => $row) {$row['num'] =$num; $html .= $adm->Gui->get('tree_page:mod_to_search_row', $row); }echo $adm->Gui->getAbs('tree_page:mod_to_search_js', array ('mod_list' => $html)); $conn->Out(); 