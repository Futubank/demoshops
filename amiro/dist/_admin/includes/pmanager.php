<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       5346 xkqwtxngxrzminiwipqmtyinpstqunqgimimkstkzmwzqgrxnqgzikqnunyxpuntlwmipnir
 */ ?><?php foreach(array(22219=>'MnMt`GOG',22220=>"'",22221=>'vZr?ZoBGQriHSuJQDmnDtZnWQD?=?*',22222=>'"?COQrQ?MS=',22223=>"GZrZID",22224=>"]QxGZnS=",22225=>"]IHSuJQ|nZIQ=",22226=>'IHSuJQ|nZIQ',22227=>"trQQ",22228=>"GIZnZPQr|fHrI",22229=>"HGtMHnD|fHrI",22230=>"nuI",22231=>"SQfZuJt|JZBHut",22232=>"nZIQ",22233=>"IHSuJQ|YHSB",22234=>"<<IHSuJQ|YHSB<<",22235=>'ZSS',22236=>"GZPQ|JHZSMnP",22237=>'100:',22238=>"",22239=>"WHntQnt") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $lLIlIIl ="pmanager"; $l1I1IL1 =1; require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .files_subpath. I22219; $template_blocks_number =$adm->PManager->GetProperty("template_blocks_number"); $l1l1L1I =" checked " ;$l1l1L1l =1; $adm->InitMessages($adm->Gui->ParseLangFile("templates/lang/_pmanager_msgs.lng")); $aModules =AMI_ModDeclarator::getInstance()->getRegistered(); $lLll1L1 =array(); foreach($aModules as $module){ if(strpos($module, 'ext_') === false){ $lLll1L1[] =I22220 .$module .I22220; }}$adm->Gui->addHtmlScript(I22221 .implode(',', $lLll1L1) .'];'); if($adm->Vars["action"] == 'repair'){ $sql ='select id, parent_id from cms_pages'; $db->query($sql); $IL1II11 =array(); while($db->next_record()){ $IL1II11[$db->Record['id']] =array($db->Record['parent_id'], array()); }foreach($IL1II11 as $l1l1L1L => $l1l1L11){ $l1l11II =$l1l1L11[0]; while($l1l11II != $l1l1L1L){ $IL1II11[$l1l1L1L][1][] =$l1l11II; if(isset($IL1II11[$l1l11II])){ $l1l11II =$IL1II11[$l1l11II][0]; }else{ break; }}$sql ='update cms_pages set all_parents="'.implode(',', array_reverse($IL1II11[$l1l1L1L][1])).I22222.intval($l1l1L1L); $db->query($sql); }unset($IL1II11); }$tree =&Tree::getInstance($adm, true); $vp =$tree->getDefaultPageIds(); if (empty($adm->Vars["id"])){ $adm->Vars["id"] =intval(AMI::getSingleton('env/cookie')->get("pmanager_last_page_id", $vp[$lang_data])); }else{ SetLocalCookie("pmanager_last_page_id", $adm->Vars["id"], time()+30*24*3600, $cms->AdminPathWWW); }$adm->Gui->addBlock("tree","templates/tree.tpl"); $l1l11Il["expand"] =$l1l1L1I; $l1l11Il[I22223] ="itemid=" .$adm->Vars["id"] ."&action=" .$adm->Vars["action"] .I22224 .$l1l1L1l .I22225 .(isset($adm->Vars[I22226]) ?$adm->Vars[I22226] :''); $l1l11Il["window_height"] =$adm->PManager->GetOption("admin_sitemap_height"); $html["tree"] =$adm->Gui->get(I22227, $l1l11Il); $form["expand"] =$l1l1L1l; $html["form"] =$adm->Gui->getAbs("spacer",""); $adm->Gui->addBlock(I22228,"templates/form.tpl"); $adm->Gui->addBlock("pmanager_subform", "templates/pmanager_form.tpl"); $adm->Gui->addBlock("options_form", "templates/_options_form.tpl"); if($adm->Core->GetOption("allow_ip_limits")) $adm->Gui->AddGlobalVars(Array ("VISIBLE_AREA" => "1")); $form['display_html_head_tail'] =true; $form[I22229] =$adm->Gui->get(I22229, $form); $form["path_list"] =""; $i =0; foreach($adm->PManager->getProperty("path_not_allowed") as $l1l11IL){ $lLIlLII["path"] =$l1l11IL; $lLIlLII[I22230] =$i; $form["path_list"] .= $adm->Gui->get("pmanager_subform:path_row", $lLIlLII); $i++; }$sql ="SELECT *  FROM cms_layouts WHERE lang='$lang_data' AND hidden=0"; $db->query($sql); $form["lay_list"] =""; $form[I22231] ="0"; while($db->next_record()) {$val =array(); $val["id"] =$db->Record["id"]; $val["name"] =$db->Record[I22232]; $form["lay_list"] .= $adm->Gui->get("pmanager_subform:lay_row", $val); }$form['blocks_hidden_fields'] =''; for ($i=1;$i<=$template_blocks_number;$i++) {$form["blocks_hidden_fields"] .= $adm->Gui->getAbs("pmanager_subform:block_hidden_field", Array("block_number"=>$i)); }$form["template_blocks_number"] =$template_blocks_number; $form[I22233] =I22234; $form["multi_site_root_www"] =jparse($l1lI1IL); if(!isset($form[I22235]) || $form[I22235] != 'disabled') {$l1l11I1 =$adm->Gui->get("pmanager_subform", $form); $html["form"] .= $adm->Gui->getAbs(I22228,Array("header"=>$adm->Words[I22236],"content"=>$l1l11I1,"form_align"=>"align=center",'width'=>I22237)); }else {if($form["action"] == "apply") {$form["cancel"] =$adm->Gui->getAbs("pmanager_subform:cancel", I22238); }$l1l11I1 =$adm->Gui->get("pmanager_subform", $form); $html["form"] .= $adm->Gui->getAbs(I22228,Array("header"=>$adm->Words["pmanager_edit"],I22239=>$l1l11I1,"form_align"=>"align=center")); }require $GLOBALS['DEFAULT_INCLUDES_PATH'] .'done.php'; 