<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       8788 xkqwpttzrmnygixrnkysklssztxugpqtiwlkytznikikykksrlsussguyntpmtnrzqxppnir
 */ ?><?php foreach(array(22492=>'MnMt`GOG',22493=>"",22494=>"HrSQr%IHSuJQ|SQDWr|SQfZuJt",22495=>"SQfZuJt",22496=>"ZGGJB",22497=>"WHIGZnB|nZIQ",22498=>"&\n#Yr@",22499=>"WOQWK",22500=>"nuI|IHSuJQD",22501=>"1",22502=>"GIZnZPQr",22503=>"HrSQr|JMnK",22504=>"nZIQ",22505=>"IHSuJQD",22506=>"SQDWrMGtMHn",22507=>"Drv|HrSQr|MIZPQ",22508=>'JMnK',22509=>"HrSQr%odGJMttQr",22510=>"HrSQr%IHSuJQ",22511=>"HrSQr%IHSuJQ|SQDWr",22512=>"Nh|szTz",22513=>"HrSQr%HrSQr|fHrI",22514=>"IHSuJQD|SQDWr",22515=>"IQnu",22516=>"tQIGJZtQD~IQnu|IHSuJQD`tGJ",22517=>"IHSuJQ",22518=>"JQvQJ",22519=>"ZWtMvQ",22520=>"|",22521=>'SHnQ`GOG') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $lLIlIIl ="services"; require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .files_subpath. I22492; $l1LILLl =&$adm->Core->GetModule("srv_order"); $adm->Gui->AddBlock("order", "templates/srv_order.tpl"); $l1LII1l =Array("content"=>I22493); $cols =intval($l1LILLl->GetOption("cols")); $l1LII1L =$adm->Gui->ParseLangFile("templates/lang/srv_order.lng"); $l1LII11 =I22493; if(isset($l1LII1L["default"])){ $l1LII11 .= $adm->Gui->getAbs(I22494, array("description"=>$l1LII1L[I22495])); }$l1LILLL =I22493; $l1LILLl =&$adm->Core->GetModule("srv_order"); if(is_object($l1LILLl) && $l1LILLl->IsInstalled()){ $l1LILLL =$adm->Gui->getAbs("order:order_link", "link", $l1LILLl->GetAdminLink()); }switch ($adm->Vars["action"]) {case I22496: require_once($GLOBALS["CLASSES_PATH"]."Mailer.php"); $oMail =new Mailer(); $oMail->RecipientAddress =$adm->Core->GetOption("hoster_email"); $oMail->SenderAddress =$adm->Core->GetOption("company_email"); $oMail->SenderName =$adm->Core->GetOption(I22497)." ".$adm->Core->GetOption("company_url"); $oMail->Subject =$l1LII1L["mail_subj"]; $body =I22493; foreach($adm->VarsPost as $vName=>$IILlLlL){ $body .= $vName." = [ ".$IILlLlL.I22498; }$oMail->Body =$body; $oMail->BodyFormat ="html"; $oMail->Prepare(); if(!$oMail->Send()){ trigger_error("MAIL: Send Failed: [$body] to [".$oMail->RecipientAddress."]", E_USER_WARNING); }$l1LII1l["content"] =$adm->Gui->getAbs("order:thanks"); break; case I22499: $l1LILL1 =array(); $l1LILL1["action"] =I22496; $l1LILL1[I22500] =0; $l1LILL1["comments"] =$adm->VarsPost["finfo"]; foreach($adm->VarsPost as $vName=>$IILlLlL){ if(mb_strpos($vName, "fmod_")!==false && $IILlLlL==I22501){ $l1LILL1[I22500]++; }}$l1LII1l["content"] =$adm->Gui->get("order:confirm_form", $l1LILL1); break; default: $l1LIL1I =false; $vOwners =&$adm->Core->GetOwnersList(); $allowedOwners =$l1LILLl->GetProperty("allowed_owners"); $lllILlL =false; foreach($vOwners as $vName->$vData){ if($vName ="pmanager"){ $lllILlL =true; break; }}if($lllILlL){ $lllILLI =array(I22502=>$vOwners[I22502]); $vOwners =$lllILLI +$vOwners; }$IIL111L =&$adm->Core->GetAllModules(); foreach($vOwners as $vName=>$vData){ $lllILL1 =I22493; $lllILLL =array(); $lllILLL["description"] =I22493; if(!$adm->Core->IsOwnerInstalled($vName)){ $lllILL1 ="_disabled"; $lllILLL["description"] .= $l1LII1L["disabled_msg"]; $lllILLL[I22503] =$l1LILLL; }$lllILLL["link"] =$vData["admin_link"]; $lllILLL["caption"] =$vData["menu_name"]; $lllILLL[I22504] =$vName; if(empty($lllILLL["link"]) || !in_array($vName, $allowedOwners)){ continue; }if(EventApplyVars($adm, "order_menu", $lllILLL)){ $i =$col =$row =0; $lllILLL[I22505] =I22493; $l1LIL1l =false; foreach($IIL111L as $vModName=>$vData){ $vMod =&$IIL111L[$vModName]; if($vMod->issetOption("srv_order_related")){ if($adm->Core->IsInstalled($vMod->GetOption("srv_order_related"))){ continue; }}if($vMod->IsInstalled() || !(($vName == $vMod->GetOwnerName())) ){continue; }$vItemData =array(); $lllILL1 =I22493; $vItemData[I22506] =I22493; if(!$vMod->IsInstalled()){ $lllILL1 ="_disabled"; $vItemData[I22506] .= $l1LII1L["disabled_msg"]; $vItemData[I22503] =$l1LILLL; }$vItemData["link"] =$vMod->GetAdminLink(); $vItemData[I22504] =$vModName; $vItemData["imgname"] =$vModName; if($vMod->issetOption(I22507)){ $l1LIL1L =$vMod->GetOption(I22507); if(!empty($l1LIL1L)){ $vItemData["imgname"] =$l1LIL1L; }}else{ $vItemData["imgname"] =$vModName; }$vItemData["caption"] =$vMod->GetOption("admin_menu_caption"); if(empty($vItemData[I22508]) || $vMod->GetParentName() != '' || !$vMod->issetAndTrueProperty('srv_order_allow')){ continue; }if(EventApplyVars($adm, "order_menu", $vItemData)){ if($i && (($col %$cols) == 0) ){$lllILLL[I22505] .= $adm->Gui->getAbs("order:VSplitter"); $row++; $col =1; }else{ $col++; if($i){ $lllILLL[I22505] .= $adm->Gui->getAbs(I22509); }}$i++; $l1LIL1l =true; $lllILLL[I22505] .= $adm->Gui->get(I22510, $vItemData); if(isset($l1LII1L[$vModName])){ $vItemData[I22506] =$l1LII1L[$vModName].$vItemData[I22506]; $l1LII11 .= $adm->Gui->get(I22511, $vItemData); }}}if($l1LIL1l){ $l1LIL1I =true; $l1LII1l["content"] .= $adm->Gui->get("order:owner", $lllILLL); if(isset($l1LII1L[$vName])){ $lllILLL[I22506] =$l1LII1L[$vName].$lllILLL[I22506]; $l1LII11 .= $adm->Gui->get(I22511, $lllILLL); }}}}if(!$l1LIL1I){ $l1LII1l["content"] .= $adm->Gui->getAbs("order:empty"); $adm->Gui->AddGlobalVars(I22512, 1); }else{ $l1LII1l["action"] =I22496; $l1LII1l["order_control"] =$adm->Gui->getAbs("order:order_control"); $l1LII1l["order_form"] =$adm->Gui->getAbs(I22513, I22514,$l1LII11); }$html["up_menu"] =$adm->Gui->get("up_menu",$l1lLL1l); if(isset($l1I1IL1)&&($l1I1IL1==1)){ $l1Il1Ll["menu"] =$adm->Gui->getAbs("spacer",I22493); }else{ $aMenu =$adm->TTTTllT(); $adm->Gui->addBlock(I22515,I22516); $l1lL1Il["items"] =I22493; foreach($aMenu as $aItem){ if($aItem[I22517]=="-"){ $l1lL1Il["items"] .= $adm->Gui->getAbs("menu:splitter",I22493); continue; }$level =($aItem[I22518]>1)?"subitem":"item"; $style ="standart"; if($aItem["active"]){ $style =I22519; }if($aItem["opened"] && $aItem[I22518]<=1){ $style ="opened"; }$l1lL1Il["items"] .= $adm->Gui->get("menu:".$style.I22520.$level,$aItem); }EventApplyVars($adm, "items_menu", $l1lLLL1); $html[I22515] =$adm->Gui->get(I22515,$l1lL1Il); }break; }$adm->Gui->addBlock("win_left","templates/left_subwindow.tpl"); $adm->Gui->addBlock("win_left_content","templates/left_subwindow_content.tpl"); EventApplyVars($adm, "info_area", $l1lLLL1); $html["form"] =$adm->Gui->get("order", $l1LII1l); require $GLOBALS['DEFAULT_INCLUDES_PATH'] .I22521; ?>