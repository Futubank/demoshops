<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       5296 xkqwzixqqxusxmmtlqppnkxzizrruupuisyqqxrizuynqwsupysztxpysiynlxiukmwwpnir
 */ ?><?php foreach(array(1891=>"|IHS|fMJQD~",1892=>"WHHKMQ|") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class CMS_HTTPRequest{ public $_useragent; public $_usecookies; public $_cookiefile; public $_returntransfer; public $_header; public $_post; public $_followlocation; public $IlIL1L1; public $_nobody; public $_verfySSL; public $_referer; public $IlIL11I; public $IlIL11l; public $_cookiepath; function CMS_HTTPRequest(){ $this->IlIL11I =false; $this->_useragent ="Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)"; $this->_returntransfer =true; $this->_nobody =false; $this->_header =false; $this->_post =false; $this->_followlocation =true; $this->_usecookies =false; $this->_cookiepath =$GLOBALS["ROOT_PATH"].I1891; $this->_verfySSL =FALSE; $this->_referer =''; }function Init(){ if (!function_exists('curl_init')) {trigger_error('No curl library.', E_USER_ERROR); }$this->IlIL11l =curl_init(); if (!$this->IlIL11l) {trigger_error('Can\'t initialize curl.', E_USER_ERROR); }$this->_cookiefile =I1892.md5(uniqid(rand(), true)).".txt"; $this->IlIL11I =true; }function TTI1ITl(){ @curl_close($this->IlIL11l); if (is_file($this->_cookiepath.$this->_cookiefile)) {@unlink($this->_cookiepath.$this->_cookiefile); }$this->IlIL11I =false; }function httpRequest($url, $IlIL11L =false, $IlIL111 =false, $postFields =null) {if (!$this->IlIL11I) {$this->Init(); }curl_setopt($this->IlIL11l, CURLOPT_URL, $url); curl_setopt($this->IlIL11l, CURLOPT_USERAGENT, $this->_useragent); curl_setopt($this->IlIL11l, CURLOPT_RETURNTRANSFER, $this->_returntransfer); curl_setopt($this->IlIL11l, CURLOPT_FAILONERROR, true); curl_setopt($this->IlIL11l, CURLOPT_HEADER, $this->_header); $IlI1III =@curl_setopt($this->IlIL11l, CURLOPT_FOLLOWLOCATION, $this->_followlocation); curl_setopt($this->IlIL11l, CURLOPT_NOBODY, $this->_nobody); curl_setopt($this->IlIL11l, CURLOPT_SSL_VERIFYPEER, $this->_verfySSL); if('' !== $this->_referer){ curl_setopt($this->IlIL11l, CURLOPT_REFERER, $this->_referer); }if ($IlIL111) {curl_setopt($this->IlIL11l, CURLOPT_COOKIEFILE, $this->_cookiepath.$this->_cookiefile); curl_setopt($this->IlIL11l, CURLOPT_COOKIEJAR, $this->_cookiepath.$this->_cookiefile); }if (mb_strlen($postFields)) {curl_setopt($this->IlIL11l, CURLOPT_POST, true); curl_setopt($this->IlIL11l, CURLOPT_POSTFIELDS, $postFields); }else {curl_setopt($this->IlIL11l, CURLOPT_POST, false); }if($IlI1III){ $content =@curl_exec($this->IlIL11l); }else{ require_once($GLOBALS["HOST_PATH"] ."_shared/code/lib/func_file_system.php"); $content =@curl_redir_exec($this->IlIL11l); }if (!$IlIL11L) {$this->TTI1ITl(); }return $content; }function getError(){ return array(curl_errno($this->IlIL11l), curl_error($this->IlIL11l)); }function getInfo(){ return curl_getinfo($this->IlIL11l); }}