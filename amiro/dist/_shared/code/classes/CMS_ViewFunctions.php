<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       5087 xkqwsyrixkmqnsytyrprkkywliziksqgzxuiknnxgkngqgrqtriixstysikytlggwmgzpnir
 */ ?><?php foreach(array(2511=>"fMJtQr|fMQJSD",2512=>"vMQC|SZtZ",2513=>"",2514=>"'?zNs?JZnP='") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class CMS_ViewFunctions {public $moduleName; public $langData; public $aRecord; function CMS_ViewFunctions(&$cms, $moduleName) {$this->moduleName =$moduleName; $this->langData =$cms->lang_data; $this->aRecord =array ();}function ProcessAction($IIIL11l, $cId) {}function TT1TTIl(&$oFilter, $Il11IlL, $Il11Il1) {$Il11ILI =sizeof($Il11IlL); $Il11ILl =sizeof($Il11Il1); $aParams =Array(); $aData =Array(); for($i=0; $i<$Il11ILI; $i++) {$oFilter->DisableFieldSql($Il11IlL[$i]); }for($i=0; $i<$Il11ILl; $i++) {$oFilter->DisableFieldSql($Il11Il1[$i]); }$aTmp =$oFilter->GetFieldsAsArray(); $aData["where"] =$oFilter->GetFilterSql(); for($i=0; $i<$Il11ILI; $i++) {$oFilter->TITI1lT($Il11IlL[$i]); $aParams[$Il11IlL[$i]] =$aTmp[$Il11IlL[$i]]; }for($i=0; $i<$Il11ILl; $i++) {$oFilter->TITI1lT($Il11Il1[$i]); }if(sizeof($aParams) >0) {$aData["params"] =$aParams; }foreach($oFilter->Fields as $fname => $val) {$aData[I2511][$fname] =$val["value"]; }return serialize($aData); }function TT1TTI1(&$cms, &$db, $viewId, &$vData, $Il11IlL, $Il11Il1, $Il11ILL) {$viewId =intval($viewId); if(empty($cms->Vars["view_data"])) {$vData["view_data"] =htmlspecialchars($this->TT1TTIl($cms->Filter, $Il11IlL, $Il11Il1)); }else {$vData["view_data"] =stripslashes($cms->Vars[I2512]); }$vData["view_form"] =$cms->Gui->get($Il11ILL.":view_form", $vData); $vData["view_scripts"] =$cms->Gui->getAbs($Il11ILL.":view_scripts",I2513); }function GetView(&$db, $viewId, $Il11IL1 ="name, view_data", $public =I2513) {$res =false; $viewId =intval($viewId); if($viewId >0 && $Il11IL1 != I2513) {$sql ="SELECT ".$Il11IL1." FROM cms_view WHERE id='".$viewId."' AND mod_name='".$this->moduleName.I2514.$this->langData."'"; if($public != I2513) {$sql .= " AND public='".$public."'"; }$db->query($sql); if($db->next_record()) {$res =$db->Record; $this->aRecord =$db->Record; }}return $res; }}?>