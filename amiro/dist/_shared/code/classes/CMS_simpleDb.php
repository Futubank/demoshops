<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       2739 xkqwiypwinlxmyrxuukkpmzxxykkqzzsptxqzqxspzwqqkuynqlpxpxylkprpppyimitpnir
 */ ?><?php foreach(array(2561=>'sy|wJMQntFJZPD',2562=>'DBD',2563=>'%',2564=>'|WurrQnt|tMIQDtZIG') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class CMS_simpleDb {public $_dbLink; public $Il11llL; public $Record; function connect($host, $user, $password, $database, $Il11ll1 =false) {$res =false; $this->_dbLink =@mysql_connect($host, $user, $password, $Il11ll1, $GLOBALS['CONFIG_INI']['dbaccess'][I2561]); if($this->_dbLink) {if(@mysql_select_db($database, $this->_dbLink)) {$res =true; if(!$this->setCharset('utf8') && !$this->setCharset('latin1')) {$res =false; }elseif(!empty($GLOBALS['sys']['time_zone'])){ $Il11lLI =$GLOBALS[I2562]['time_zone']; if($Il11lLI >0){ $Il11lLI ='+' .$Il11lLI; }$this->query("SET time_zone = '" .$Il11lLI .":00'"); }}}return $res; }function setCharset($charset) {$p =explode(I2563,$charset); $sql ="SET NAMES '".addslashes($p[0])."'"; if(isset($p[1])) {$sql .= ",collation_connection='".addslashes($p[1])."'"; }return $this->query($sql); }function TT1TTlT() {return microtime(true) -$GLOBALS[I2564] +20; }function query($sql) {global $_total_qtime, $_total_queries; $Il11lLl =$this->TT1TTlT(); $this->Il11llL =@mysql_query($sql, $this->_dbLink); $_total_qtime += ($this->TT1TTlT() -$Il11lLl); $_total_queries++; return $this->Il11llL; }function &nextRecord() {global $_total_qtime, $_total_ftime, $_total_fqueries; $Il11lLl =$this->TT1TTlT(); $this->Record =@mysql_fetch_array($this->Il11llL, MYSQL_ASSOC); $Il11lLL =$this->TT1TTlT() -$Il11lLl; $_total_ftime += $Il11lLL; $_total_qtime += $Il11lLL; $_total_fqueries++; return $this->Record; }}