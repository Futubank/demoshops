<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       3957 xkqwixgymylpkrkplgxxzrtnrspmxpiyztgytpzuqzlklwrninlrwksuuwzgytrnxuxxpnir
 */ ?><?php foreach(array(5147=>'wjzddqd|gzTo',5148=>'iHSuJQRQMnSQxFunWtMHnD`GOG',5149=>'ZSS',5150=>'Qxt|ZWtMHn') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ExtReindex extends CMS_ExtModule {public $reindexFunctions; public $IL1L1II; function ExtReindex() {parent::CMS_ExtModule(); $this->reindexFunctions =null; $this->IL1L1II =true; }function Init(&$cms, &$IlIlIl1, &$IlIlILI) {parent::Init($cms, $IlIlIl1, $IlIlILI); require_once $GLOBALS['CLASSES_PATH'] .'CMS_Functions.php'; require_once $GLOBALS[I5147] .I5148; $this->reindexFunctions =new ModuleReindexFunctions($cms, $this->db, $IlIlIl1, $IlIlILI); $this->IL1L1II =$this->cms->Core->getModOption('reindex', 'allow_runtime_indexing'); }function GetModuleName() {return "ext_reindex"; }function TITII1l($itemId){ $this->reindexFunctions->reindexById($itemId, $this->mod->module, $this->db, $this->mod->langData); }function TITII11($itemId){ $this->reindexFunctions->reindexById($itemId, $this->mod->module, $this->db, $this->mod->langData); }function TITIlTT($itemId){ $this->reindexFunctions->publishById($itemId, $this->mod->module, $this->db, $this->mod->langData); }function TITIlTI($itemId){ $this->reindexFunctions->deleteFromIndexById($itemId, $this->mod->module->GetName()); }function TTIl1I1($cId, &$vItemData, &$vData, &$IILIILl){ if($this->IL1L1II){ switch($IILIILl['ext_action']){ case I5149: $this->TITII1l($this->mod->appliedId); break; case 'apply': $this->TITII11($cId); break; case 'publish': $this->TITIlTT($cId); break; case 'del': $this->TITIlTI($cId); break; }}}function TTIl1II($cId, &$vItemData, &$vData, &$IILIILl){ if ($this->IL1L1II && $this->mod->moduleName == 'forum') {switch ($IILIILl[I5150]) {case I5149: $this->TITII1l($this->mod->appliedId); break; case 'apply': $this->TITII11($cId); break; }}}}