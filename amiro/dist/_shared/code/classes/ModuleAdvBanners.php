<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       28586 xkqwpxtixnmnliyxysgiwyrktppksqtplnlqnrxuuxzmuztpiqlmmuzirgxpwwizsqsgpnir
 */ ?><?php foreach(array(6021=>"PrHuG|HGQrZtMHnD",6022=>'Y',6023=>"",6024=>"fJt|nZIQ",6025=>"Y`MS|WZIGZMPn",6026=>"fJt|WZIGZMPn|MS",6027=>"MS",6028=>"urJ",6029=>"ZSv|GJZWQD",6030=>"tQxt|fMQJS|",6031=>"'?HrSQr?YB?nZIQ",6032=>"SQf|GJZWQD",6033=>"DQJQWtQS",6034=>"coqRq?1?",6035=>"ZWtMHn",6036=>"vZJuQ",6037=>"ZWtMHn|SQJ",6038=>"Hff",6039=>"GuYJMDOQS",6040=>"JQP|QSMt",6041=>"YuttHnD",6042=>"dqjqwT?Y`[?",6043=>"MD|SQfZuJt",6044=>"DtZtuD|",6045=>"fMJQ",6046=>"WHntQnt",6047=>"tBGQ",6048=>"SZtZ",6049=>"tO",6050=>"YWHnS",6051=>"tMIQ",6052=>"]Jt^",6053=>"SZtZ1",6054=>"WHnS",6055=>"frHnt",6056=>"zsimN|gzTo|ccc",6057=>"YZnnQr|tBGQ",6058=>"zsVqRTmdqR|jhpmN",6059=>"wjzddqd|gzTo",6060=>"iHSuJQzSvyZnnQrD%|zWtMHnzSS?DQnSMnP?QIZMJ?tH?",6061=>"'",6062=>"DtZtuD",6063=>"dmTq",6064=>"yzNNqR|jmNk",6065=>"nHtQ",6066=>"zsVqRTmdqR|Nziq",6067=>"iZMJQr`GOG",6068=>"WZIGZMPnD",6069=>"tQxt|YZnnQr|fMQJSD",6070=>"|Fmjqd",6071=>"YZnnQr",6072=>"ihsUjq|gmwTURqd|gzTo",6073=>"ZGGJB",6074=>"MS|WZIGZMPn",6075=>"GJZWQD",6076=>"OQMPOt",6077=>"tPt|tBGQ|",6078=>"tPt|WHnS|",6079=>"0",6080=>"tu",6081=>"WOKtPt|",6082=>"fr",6083=>"1",6084=>"tZrPQtMnP",6085=>"IHn",6086=>"rQfQrrQr",6087=>"truQ",6088=>"tZrPQtMnP|WHIGMJQS",6089=>'"!?"',6090=>'?',6091=>'?WIGJVZJsZtQ}"',6092=>'?WIGJVZJRQfr}"') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ModuleAdvBanners extends CMS_ActModule {function ModuleAdvBanners(&$cms, &$db, &$cModule) {parent::CMS_ActModule($cms, $db, $cModule); $this->campaignsData =array(); }function _Init($IIll1l1 =Array(), $IIll1LI ="", $IIll1Ll ="", $aOptions =Array()) {$IIIIL11[I6021] =Array("publish_on", "publish_off", "del"); $IIIIL11['default_prefix'] =I6022; $aOptions += $IIIIL11; parent::_Init($IIll1l1, $IIll1LI, $IIll1Ll, $aOptions); }function _InitAdmin() {parent::_InitAdmin(); }function TTTlIII() {parent::TTTlIII(); if($this->realSide != "front"){ $this->filter->AddField("flt_name", "text", stripslashes(unhtmlentities($this->cms->Vars["flt_name"])), I6023, " like ", "name"); $this->filter->MoveField("flt_name",_MOVE_START); if(empty($this->cms->Vars["flt_name"])) $this->filter->DisableFieldSQL(I6024); $this->filter->AddField("flt_campaign_id", "text", stripslashes($this->cms->Vars["flt_campaign_id"]), I6023, "=", I6025); $this->filter->MoveField("flt_campaign_id",_MOVE_START); $this->filter->TITIll1("flt_campaign_id"); if(empty($this->cms->Vars["flt_campaign_id"])) $this->filter->DisableFieldSQL("flt_campaign_id"); else{ $I1lLI1l =$this->filter->GetLikeSQL(addslashes(unhtmlentities($this->cms->Vars[I6026])), 'name'); $sql ="select id, name from cms_adv_campaigns where 1".$I1lLI1l['res']; $this->db->query($sql); $I1lLI1L =I6023; while($this->db->next_record()) $I1lLI1L .= " OR  POSITION(';".$this->db->Record[I6027].";' IN b.id_campaign)>0"; if(!empty($I1lLI1L)) $this->filter->TITI1II(I6026, $I1lLI1L, "force"); }$this->filter->TITI1l1("datefrom"); $this->filter->TITI1l1("dateto"); }}function TTTlITT($IIIL11l, $cId, $cModule =I6023) {parent::TTTlITT($IIIL11l, $cId, $cModule); }function &TTTlI1T(&$aCustom) {return parent::TTTlI1T($aCustom); }function TTTlI1I(&$vData) {if(empty($vData[I6028])) $vData[I6028] ="http://"; if(!isset($this->itemData["status"])) $this->itemData["status_2"] ="selected"; parent::TTTlI1I($vData); }function TTTlI11(&$vData, &$aCustom) {$I1lLI11 =$this->cms->Core->GetModOption(I6029, "text_banner_fields"); $I1lLlII =false; if(!is_array($I1lLI11)) $I1lLlII =true; else{ for($i =0; $i <count($I1lLI11); $i++){ if($I1lLI11[$i] >0) break; }if($i == count($I1lLI11)) $I1lLlII =true; }if($I1lLlII){ $I1lLI11 =array(0, 255); }$vData["text_banner"] =I6023; $vData["text_banner_JS"] =I6023; if(is_array($I1lLI11)){ for($i =0; $i <count($I1lLI11); $i++){ if($I1lLI11[$i] >0){ $tmp =array( I6027 => $i, "field_name" => $this->words[I6030.$i], "maxlen" => $I1lLI11[$i], "value" => stripslashes($this->itemData["content"][$i]), );$vData["text_banner"] .= $this->cms->Gui->get("adv_banners_subform:text_banner", $tmp); $vData["text_banner_JS"] .= $this->cms->Gui->get("adv_banners_subform:text_banner_JS", $tmp); }}}if($this->realSide != "front"){ $sql ="select id, name from cms_adv_places where lang='".$this->langData.I6031; $this->db->query($sql); while($this->db->next_record()){ $tmp =array( "value" => $this->db->Record[I6027], "name" => $this->db->Record["name"], "selected" => mb_strpos($this->itemData[I6032], ";".$this->db->Record[I6027].";") !== false ?"selected" :I6023 );$vData["places"] .= $this->cms->Gui->get("adv_banners_subform:select_option", $tmp); }$sql ="select id, name from cms_adv_campaigns where lang='".$this->langData.I6031; $this->db->query($sql); while($this->db->next_record()){ $tmp =array( "value" => $this->db->Record[I6027], "name" => $this->db->Record["name"], I6033 => mb_strpos($this->itemData["id_campaign"], ";".$this->db->Record[I6027].";") !== false ?I6033 :I6023 );$vData["campaigns"] .= $this->cms->Gui->get("adv_banners_subform:select_option", $tmp); }}$this->browser->InitSQL("b.id, b.public, b.name, b.status, b.type, b.url, IF(b.public AND b.status=2, 0, 1) as iseditable, b.file, '".$GLOBALS["ROOT_PATH_WWW"]."' as file_base", "FROM cms_adv_banners b ", I6034.$this->_ApplyFilters().$this->TTTlIl1(), I6023, "b.name", "b.id desc" );$aCustom["fields"] += Array( "public"=>Array(I6035=>"flagicon", "value"=>1, I6027=>"pub_id", "on"=>"adv_banners_list:public_on","off"=>"adv_banners_list:public_off"), "action_edit"=>Array(I6035=>"flagicon", I6036=>I6023, I6027=>"edit_id", "on"=>"adv_banners_list:edit","off"=>I6023), I6037=>Array(I6035=>"flagicon", I6036=>I6023, I6027=>"del_id", "on"=>"adv_banners_list:del",I6038=>I6023) );$aCustom["applied_id"] ="b.id"; if($this->realSide != "front") $aCustom["legend"] =Array(I6039, "notpublished", "leg_red", "leg_yellow", "leg_blue", I6040, "leg_del"); else $aCustom["legend"] =Array(I6040, "leg_del"); $aCustom["form_data"][I6041] =Array("add", "apply", "cancel", "save"); parent::TTTlI11($vData, $aCustom); }function TTTl1Tl($cId, $cModule) {parent::TTTl1Tl($cId, $cModule); $sql =I6042. "FROM cms_adv_banners b ". "WHERE b.id='".$cId."'".($this->realSide == "front" ?" AND (b.public!=1 OR b.status!=2)" :I6023).$this->_ApplyFilters(); $this->db->query($sql); if($this->db->next_record()) {$this->itemData =$this->db->Record; $this->itemData["public"] =($this->itemData["public"] == 1) ?"checked": I6023; $this->itemData["is_default"] =($this->itemData[I6043] == 1) ?"checked": I6023; if($this->itemData["type"] != 1) $this->itemData["type_2"] =I6033; else $this->itemData["type_1"] =I6033; $this->itemData[I6044.$this->itemData["status"]] =I6033; if($this->itemData["type"] != 1 && !empty($this->itemData["file"]) && is_file($GLOBALS["ROOT_PATH"].$this->itemData[I6045])){ $this->itemData["banner"] =$GLOBALS["ROOT_PATH_WWW"].$this->itemData[I6045]; }if($arr =unserialize($this->itemData["content"])){ $this->itemData["content"] =$arr; }else{ $this->itemData[I6046] =array(1 => $this->itemData[I6046]); }$I1lLlIl =unserialize($this->itemData["targeting"]); if(is_array($I1lLlIl) && count($I1lLlIl) >0){ for($i =0; $i <count($I1lLlIl); $i++){ $tData =false; switch($I1lLlIl[$i]["type"]){ case "weekday": $tData =array("type" => $I1lLlIl[$i][I6047], "bcond" => $I1lLlIl[$i]["bcond"], "cond" => $I1lLlIl[$i]["cond"], I6048 => $I1lLlIl[$i]["su"].$I1lLlIl[$i]["mo"].$I1lLlIl[$i]["tu"].$I1lLlIl[$i]["we"].$I1lLlIl[$i][I6049].$I1lLlIl[$i]["fr"].$I1lLlIl[$i]["sa"]); break; case "time": $tData =array(I6047 => $I1lLlIl[$i][I6047], "bcond" => $I1lLlIl[$i][I6050], "cond" => $I1lLlIl[$i]["cond"], I6048 => "000000000000000000000000"); if(is_array($I1lLlIl[$i]["time"])) for($j =0; $j <= 23; $j++){ if(in_array($j, $I1lLlIl[$i][I6051])) $tData[I6048][$j] ="1"; }break; case "date": $tData =array(I6047 => $I1lLlIl[$i][I6047], I6050 => $I1lLlIl[$i][I6050], "cond" => str_replace(array("&gt;", I6052), array(">", "<"), $I1lLlIl[$i]["cond"]), I6048 => $I1lLlIl[$i]["day"], I6053 => $I1lLlIl[$i]["mon"], "data2" => $I1lLlIl[$i]["year"]); break; case "referrer": $tData =array(I6047 => $I1lLlIl[$i][I6047], I6050 => $I1lLlIl[$i][I6050], I6054 => $I1lLlIl[$i][I6054], I6048 => $I1lLlIl[$i]["ref"]); break; }if($tData !== false) $this->itemData["field_row_items"] .= $this->cms->Gui->get("adv_banners_subform:field_row_item", $tData); }}}else if($this->realSide == "front"){ }}function TTTll11($cId, $cModule) {parent::TTTll11($cId, $cModule); $II1LLLL =$this->GetLastError(); if($this->realSide == I6055 && empty($II1LLLL['errno']) && $this->appliedId >0){ $sql ="select * from cms_adv_banners where id=".intval($this->appliedId); $this->db->query($sql); if($this->db->next_record()){ $this->cms->Gui->addBlock("adv_mails", $GLOBALS["LOCAL_FILES_REL_PATH"]."_admin/templates/letters/advertisement_" .$this->langData .".tpl"); $mailData =$this->db->Record; $mailData["SITE"] =$this->cms->Core->GetOption("company_url"); $mailData["MANAGE_URL"] =$GLOBALS[I6056].$this->module->GetAdminLink()."?action=locate&id=".$mailData[I6027]."#anchor"; $mailData["note"] =stripslashes(unhtmlentities($this->cms->VarsPost["audit_comments"])); $mailData[I6057] =$this->words["type_unknown"]; switch($mailData[I6047]){ case 1: $mailData[I6057] =$this->words["type_text"]; break; case 2: $mailData[I6057] =$this->words["type_img"]; break; case 3: $mailData[I6057] =$this->words["type_flash"]; break; }$userId =intval($this->cms->Core->GetUserId()); if($userId >0){ $sql ="select m.firstname, m.lastname, m.username from cms_members m where id=".$userId; $this->db->query($sql); if($this->db->next_record()){ $mailData["ADVERTISER_NAME"] =$this->db->Record["lastname"]." ".$this->db->Record["firstname"]; $mailData[I6058] =$this->db->Record["username"]; }}$ILLl1ll =$this->cms->Gui->get("adv_mails:adv_mail_header", $mailData). $this->cms->Gui->get("adv_mails:mail_banner_added", $mailData). $this->cms->Gui->get("adv_mails:adv_mail_footer", $mailData); require_once($GLOBALS[I6059]."Mailer.php"); $oMail =new Mailer(); $oMail->RecipientAddress =$this->cms->Core->GetOption("company_email"); $oMail->RecipientName =I6023; $oMail->SenderAddress =$this->cms->Core->GetOption("company_robot_email"); $oMail->SenderName =$this->cms->Core->GetOption("company_name"); $oMail->Subject =$this->cms->Gui->get("adv_mails:mail_banner_added_subject", $mailData); $oMail->Body =$ILLl1ll; $oMail->BodyFormat ="html"; $oMail->Prepare(); if(!$oMail->Send()){ trigger_error(I6060.$this->cms->Core->GetOption("company_email")." failed", E_USER_WARNING); }}}}function _ActionDel($cId, $cModule) {parent::_ActionDel($cId, $cModule); }function TTTl1lI($cId, $cModule) {$prevStatus =0; $sql ="select status from cms_adv_banners where id='".$cId.I6061; $this->db->query($sql); if($this->db->next_record()){ $prevStatus =$this->db->Record["status"]; }parent::TTTl1lI($cId, $cModule); $II1LLLL =$this->GetLastError(); if($this->realSide != I6055 && empty($II1LLLL['errno']) && $cId >0 && $prevStatus==1){ $sql ="select * from cms_adv_banners where id='".$cId."' and id_owner>0"; $this->db->query($sql); if($this->db->next_record()){ if($this->db->Record[I6062] >1){ $this->cms->Gui->addBlock("adv_mails", $GLOBALS["LOCAL_FILES_REL_PATH"]."_admin/templates/letters/advertisement_" .$this->langData .".tpl"); $mailData =$this->db->Record; $mailData[I6063] =$this->cms->Core->GetOption("company_url"); $userId =intval($this->db->Record["id_owner"]); if($this->cms->Core->IsInstalled("ext_adv_audit")){ $I1lLlIL =&$this->GetExtension("ext_adv_audit"); $mailData[I6064] =$GLOBALS["ROOT_PATH_WWW"].$I1lLlIL->TITT1TI($this->cms, "adv_banners")."?action=locate&id=".intval($cId)."#anchor"; }$mailData[I6065] =stripslashes(unhtmlentities($this->cms->VarsPost["audit_comments"])); if($userId >0){ $sql ="select m.email, m.firstname, m.lastname, m.username from cms_members m where id=".$userId; $this->db->query($sql); if($this->db->next_record()){ $mailData["ADVERTISER_EMAIL"] =$this->db->Record["email"]; $mailData[I6066] =$this->db->Record["lastname"]." ".$this->db->Record["firstname"]; $mailData[I6058] =$this->db->Record["username"]; }}$ILLl1ll =$this->cms->Gui->get("adv_mails:adv_mail_header", $mailData). ($mailData[I6062] == 3 ?$this->cms->Gui->get("adv_mails:mail_banner_declined", $mailData) :$this->cms->Gui->get("adv_mails:mail_banner_approved", $mailData)). $this->cms->Gui->get("adv_mails:adv_mail_footer", $mailData); if(!empty($mailData["ADVERTISER_EMAIL"])){ require_once($GLOBALS[I6059].I6067); $oMail =new Mailer(); $oMail->RecipientAddress =$mailData["ADVERTISER_EMAIL"]; $oMail->RecipientName =$mailData[I6066]; $oMail->SenderAddress =$this->cms->Core->GetOption("company_robot_email"); $oMail->SenderName =$this->cms->Core->GetOption("company_name"); $oMail->Subject =($mailData[I6062] == 3 ?$this->cms->Gui->get("adv_mails:mail_banner_declined_subject", $mailData) :$this->cms->Gui->get("adv_mails:mail_banner_approved_subject", $mailData)); $oMail->Body =$ILLl1ll; $oMail->BodyFormat ="html"; $oMail->Prepare(); if(!$oMail->Send()){ trigger_error(I6060.$mailData["ADVERTISER_EMAIL"]." failed", E_USER_WARNING); }}}}}}function TTT1IlI($aSql =Array(), $cId =0) {$name =$this->cms->VarsPost["name"]; $campaigns =$this->cms->VarsPost[I6068]; $ownerId =0; $url =$this->cms->VarsPost[I6028]; $type =$this->cms->VarsPost[I6047]; if(is_array($campaigns)){ $tmp =array(); for($i =0; $i <count($campaigns); $i++) if(intval($campaigns[$i]) >0) $tmp[] =intval($campaigns[$i]); $campaigns =$tmp; }else $campaigns =array(); if($this->realSide != I6055){ if(count($campaigns) >0){ $sql ="select id_owner, count(id) as cnt from cms_adv_campaigns where id in ('".implode("', '", $campaigns)."') group by id_owner order by cnt desc"; $this->db->query($sql); if($this->db->next_record()) $ownerId =$this->db->Record["id_owner"]; }}$source =I6023; if($type == 1){ $I1lLI11 =$this->cms->Core->GetModOption(I6029, I6069); $I1lLlII =false; if(!is_array($I1lLI11)) $I1lLlII =true; else{ for($i =0; $i <count($I1lLI11); $i++){ if($I1lLI11[$i] >0) break; }if($i == count($I1lLI11)) $I1lLlII =true; }if($I1lLlII){ $I1lLI11 =array(0, 255); }$tmp =array(); if(is_array($I1lLI11)){ for($i =0; $i <count($I1lLI11); $i++){ $tmp[$i] =$this->cms->VarsPost["field_".$i]; }}$source =addslashes(serialize($tmp)); }else{ if(!empty($GLOBALS["_FILES"]["banner"]["name"]) && filesize($GLOBALS[I6070]["banner"]["tmp_name"])) {$fileName =$this->cms->TTITI11(stripslashes($GLOBALS[I6070]["banner"]["name"])); $fileName =preg_replace('/^(.*)(\.[a-zA-Z0-9]{1,5})$/ie', '\'$1\'.date("YmdHis").\'$2\'', $fileName); if(preg_match('/^((.*\.gif)|(.*\.jpg)|(.*\.jpeg)|(.*\.png)|(.*\.swf))$/i', $fileName)){ $imgData =imageGetSize($GLOBALS[I6070]["banner"]["tmp_name"]); if(($imgData[2] <= 4 && $imgData[2] >0 || $imgData[2] == 13) && $this->cms->doUploadImage($GLOBALS[I6070][I6071], $GLOBALS[I6072]."advert/".$fileName)){ $source =$GLOBALS["II1LIII"]."advert/".$fileName; $type =($imgData[2] == 4 || $imgData[2] == 13) ?3 :2; $width =$imgData[0]; $height =$imgData[1]; $size =filesize($GLOBALS[I6072]."advert/".$fileName); }}}else if($cId >0){ $type =-1; }}if(!empty($name) && !empty($url) && !empty($type) && (!empty($source) || $this->action == I6073 && $type != 1)) {$aSql =Array( "name"=>$name, I6028=>$this->cms->VarsPost[I6028], );if($this->realSide != I6055){ $aSql["public"] =intval($this->cms->VarsPost["public"]); if($ownerId >0) $aSql["id_owner"] =$ownerId; $aSql[I6074] =(count($campaigns) >0 ?";".implode(";", $campaigns).";" :I6023); $aSql[I6043] =intval($this->cms->VarsPost[I6043]); $aSql[I6032] =(is_array($this->cms->VarsPost["places"]) && count($this->cms->VarsPost[I6075]) >0 ?";".implode(";", $this->cms->VarsPost[I6075]).";" :I6023); $aSql[I6062] =$this->cms->VarsPost[I6062]; }if($type >0) $aSql[I6047] =$type; if($type == 1) $aSql[I6046] =$source; else{ if(!empty($source)){ $aSql[I6045] =$source; $aSql["width"] =$width; $aSql[I6076] =$height; $aSql["size"] =$size; }}if($this->realSide != I6055){ $aSql["targeting"] =array(); foreach(explode(";", $this->cms->VarsPost["fields_map"]) as $IL1l1L1){ if($IL1l1L1 >0){ switch($this->cms->VarsPost[I6077.$IL1l1L1]){ case "weekday": $aSql["targeting"][] =array( I6047 => "weekday", I6050 => $this->cms->VarsPost["tgt_bcond_".$IL1l1L1], I6054 => $this->cms->VarsPost[I6078.$IL1l1L1], "su" => isset($this->cms->VarsPost["chktgt_".$IL1l1L1."_su"]) ?"1" :I6079, "mo" => isset($this->cms->VarsPost["chktgt_".$IL1l1L1."_mo"]) ?"1" :I6079, I6080 => isset($this->cms->VarsPost["chktgt_".$IL1l1L1."_tu"]) ?"1" :I6079, "we" => isset($this->cms->VarsPost[I6081.$IL1l1L1."_we"]) ?"1" :I6079, I6049 => isset($this->cms->VarsPost[I6081.$IL1l1L1."_th"]) ?"1" :I6079, I6082 => isset($this->cms->VarsPost[I6081.$IL1l1L1."_fr"]) ?"1" :I6079, "sa" => isset($this->cms->VarsPost[I6081.$IL1l1L1."_sa"]) ?I6083 :I6079 );break; case I6051: $aSql["targeting"][] =array( I6047 => I6051, I6050 => $this->cms->VarsPost["tgt_bcond_".$IL1l1L1], I6054 => $this->cms->VarsPost[I6078.$IL1l1L1], I6051 => $this->cms->VarsPost["tgt_".$IL1l1L1] );break; case "date": $aSql[I6084][] =array( I6047 => "date", I6050 => $this->cms->VarsPost["tgt_bcond_".$IL1l1L1], I6054 => $this->cms->VarsPost[I6078.$IL1l1L1], "day" => $this->cms->VarsPost["tgtday_".$IL1l1L1], I6085 => $this->cms->VarsPost["tgtmon_".$IL1l1L1], "year" => $this->cms->VarsPost["tgtyear_".$IL1l1L1] );break; case "referrer": $aSql[I6084][] =array( I6047 => I6086, I6050 => $this->cms->VarsPost["tgt_bcond_".$IL1l1L1], I6054 => $this->cms->VarsPost[I6078.$IL1l1L1], "ref" => $this->cms->VarsPost["tgt_".$IL1l1L1] );break; }}}$aSql["targeting_compiled"] =I6087; foreach($aSql[I6084] as $null => $I1lLlI1){ $I1lLlI1[I6054] =str_replace(array("&gt;", I6052), array(">", "<"), $I1lLlI1[I6054]); switch($I1lLlI1[I6047]){ case "weekday": $aSql[I6088] .= ' '.$I1lLlI1[I6050].' cmplValWeek("'.$I1lLlI1[I6054].'", array("'.$I1lLlI1["su"].I6089.$I1lLlI1["mo"].I6089.$I1lLlI1[I6080].I6089.$I1lLlI1["we"].I6089.$I1lLlI1[I6049].I6089.$I1lLlI1[I6082].I6089.$I1lLlI1["sa"].'"))'; break; case I6051: $aSql[I6088] .= I6090.$I1lLlI1[I6050].' cmplValTime("'.$I1lLlI1[I6054].'", array("'.implode(I6089, $I1lLlI1[I6051]).'"))'; break; case "date": $aSql[I6088] .= I6090.$I1lLlI1[I6050].I6091.$I1lLlI1[I6054].I6089.sprintf("%04d-%02d-%02d", $I1lLlI1["year"], $I1lLlI1[I6085], $I1lLlI1["day"]).'")'; break; case I6086: $aSql[I6088] .= I6090.$I1lLlI1[I6050].I6092.$I1lLlI1[I6054].I6089.addslashes($I1lLlI1["ref"]).'")'; break; }}$aSql[I6084] =serialize($aSql[I6084]); }}$aSql =parent::TTT1IlI($aSql, $cId); return $aSql; }}