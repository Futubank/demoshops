<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       2934 xkqwwpxripyzxmrxwplknxnmnnzityurkwpmuypqizzulikgrnlkkxyunnqtsywwlwqwpnir
 */ ?><?php foreach(array(8970=>"frHnt",8971=>"IHSuJQ|nZIQ",8972=>"|rQfQrQnWQ",8973=>"DY|SZtZ",8974=>"DGQW|IHSuJQ|YHSB",8975=>"tZYJQ|nuI") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ModuleEshopReferenceTable {public $lIllLLI; public $oMod; function ModuleEshopReferenceTable(&$oMod) {$this->oMod =&$oMod; $this->lIllLLI =Array(); }function GetTableName($lIllLLl, $aAdditionalParams) {global $cms; $res =$lIllLLl; $pageId =intval($this->oMod->TTlT1lT("page_id")); $lIllLLL =intval($this->oMod->TTlT1lT("_check_link")); if(($cms->Side == I8970 || !empty($aAdditionalParams["check_links_conflict"])) && $pageId >0) {if(isset($this->lIllLLI[$pageId])) {$res =$this->lIllLLI[$pageId]; }else {require_once($GLOBALS["CLASSES_PATH"].files_subpath."Page.php"); $tmpPage =new Page($cms); $pageInfo =$tmpPage->TTlllI1($pageId, array(I8971, "sb_data")); $tmpMod =&$cms->Core->GetModule($pageInfo[I8971]); $lIllLL1 =$tmpMod->GetOwnerName().I8972; $lIllL1I =$cms->Core->GetModOption($lIllLL1, "table_name"); $res =$lIllL1I."0001"; if($pageInfo["sb_data"] != "") {$sbData =unserialize($pageInfo[I8973]); $lIllL1l =0; if(isset($sbData[I8974][$pageInfo[I8971]]["show_ref_id"]) && $sbData[I8974][$pageInfo[I8971]]["show_ref_id"] >0) {$lIllL1l =$sbData[I8974][$pageInfo[I8971]]["show_ref_id"]; }else {$lIllL1l =$cms->Core->GetModOption($pageInfo[I8971], "show_ref_id"); }if($lIllL1l >0) {$db =new DB_si; $sql ="SELECT table_num FROM ".$this->oMod->TablePrefix.$this->oMod->TTlT1lT("main_table_name")." WHERE id='".$lIllL1l."'"; $db->query($sql); if($db->next_record()) {$res =$lIllL1I.sprintf("%04d", $db->Record[I8975]); $this->lIllLLI[$pageId] =$res; }}}}}return $res; }}?>