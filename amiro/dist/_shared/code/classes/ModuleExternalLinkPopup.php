<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       3645 xkqwklunylsxxuiizsmyytxrslpmpuywugzktmwyyrlrytwmmmlmwuuusqmrilznmyqipnir
 */ ?><?php foreach(array(9474=>"PrHuG|HGQrZtMHnD",9475=>"OMSSQn",9476=>"fJt|IHSuJQ|nZIQ",9477=>"",9478=>'QJ',9479=>"SZtQ",9480=>"fJZPMWHn",9481=>"|JMDt%SQJ",9482=>"JQP|SQJ",9483=>"'?zNs?IHSuJQ|nZIQ='",9484=>"'?zNs?JZnP='",9485=>"IHSuJQ|nZIQ?=?'",9486=>"'") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ModuleExternalLinkPopup extends CMS_ActModule {function ModuleExternalLinkPopup(&$cms, &$db, &$cModule) {parent::CMS_ActModule($cms, $db, $cModule); }function _Init($IIll1l1 =Array(), $IIll1LI ="", $IIll1Ll ="", $aOptions =Array()) {$IIIIL11[I9474] =Array("del"); $aOptions += $IIIIL11; parent::_Init($IIll1l1, $IIll1LI, $IIll1Ll, $aOptions); }function TTTlIII() {$this->filter->TITI1l1("datefrom"); $this->filter->TITI1l1("dateto"); $this->filter->AddField("flt_id_target", I9475, $this->cms->Vars["flt_id_target"]); $this->filter->AddField(I9476, I9475, $this->cms->Vars[I9476]); $this->filter->AddField("flt_name", "text", stripslashes(unhtmlentities($this->cms->Vars["flt_name"])), I9477, " like ", "name"); parent::TTTlIII(); }function TTTlI11(&$vData, &$aCustom) {$this->browser->InitSQL("id, id_external, name", Array('tables'=>Array(I9478=>'cms_external_links'), 'joins'=>Array(), 'joins_types'=>Array() ),"WHERE 1 ".$this->_ApplyFilters().$this->TTTlIl1(), I9477, I9479, "el.id desc" );$aCustom["fields"] += Array( "action_del"=>Array("action"=>I9480, "value"=>I9477, "id"=>"del_id", "on"=>$this->moduleName.I9481,"off"=>I9477), );$aCustom["applied_id"] ="el.id"; $aCustom["legend"] =Array(I9482); $aCustom["form_data"]["buttons"] =Array(); parent::TTTlI11($vData, $aCustom); $sql ="SELECT count(*) as cnt FROM cms_external_links WHERE id_target='".$this->cms->Vars["flt_id_target"].I9483.$this->cms->Vars[I9476].I9484.$this->langData."'"; $this->db->query($sql); $this->db->next_record(); $vData["num_external_links"] =$this->db->Record["cnt"]; $vData["subform"] .= $this->cms->Gui->get($this->moduleName."_subform:set_num_external_links", $vData); }function _ApplyFilters($prefix ='', $bodyType ='', $IIlLLl1 =true) {$res =parent::_ApplyFilters($prefix, $bodyType, $IIlLLl1); $res .= " AND ".$IILIILl["prefix"].I9485.$this->cms->Vars[I9476].I9486; $res .= " AND ".$IILIILl["prefix"]."id_target = '".$this->cms->Vars["flt_id_target"].I9486; return $res; }}?>