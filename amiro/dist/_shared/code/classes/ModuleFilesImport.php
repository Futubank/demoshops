<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       5622 xkqwkgrlmpkmwlsswglswxkmyuxqqymnpustgzzkwnukunlpnriysztqupmmiikrkntmpnir
 */ ?><?php foreach(array(9535=>'',9536=>"fMJQD|IHSuJQ",9537=>"GuYJMW",9538=>"WZt|MS",9539=>"MS",9540=>'ZWtMHn',9541=>'ZGGJMQS|MS',9542=>'JMDt|SZtZ',9543=>"|GuYJMW",9544=>"fMJQ",9545=>"DMAQ") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ModuleFilesImport extends CMS_FilesImportModule {public $lIl1lII; function ModuleFilesImport(&$cms, &$db, &$cModule) {parent::CMS_FilesImportModule($cms, $db, $cModule); if($this->cms->Core->IsInstalled("files_cat")) {$this->IlIllI1 =new CMS_CategoriesFunctions($this->cms, $this, "files_cat"); }}function _Init($IIll1l1 =Array(), $IIll1LI =I9535, $IIll1Ll =I9535, $aOptions =Array()) {require_once($GLOBALS["FUNC_INCLUDES_PATH"]."func_gui.php"); $aOptions[I9536] ="files"; parent::_Init($IIll1l1, $IIll1LI, $IIll1Ll, $aOptions); $this->IlIllI1->_Init(); }function TTTlI1I(&$vData) {parent::TTTlI1I($vData); if(sizeof($this->cms->VarsPost) >0) {$cPath =$this->cms->AdminPathWWW.$this->cms->ActiveScript; SetLocalCookie($this->moduleName."_public", isset($this->cms->VarsPost[I9537]) ?$this->cms->VarsPost[I9537] :null, time()+30*24*3600, $cPath); }}function &TTTlI1T(&$aCustom) {$aData =parent::TTTlI1T($aCustom); $aData["filter"] =""; return $aData; }function TTTlI11(&$vData, &$aCustom) {$aCustom['list_data'] =Array(); $aCustom['list_data'][$this->IlIllI1->IILLL1I] =isset($this->cms->VarsPost[I9538]) ?$this->cms->VarsPost[I9538] :null; $this->lIl1lII =$this->IlIllI1->TTIT1I1($aCustom['list_data']) >0; $aCustom['list_data']['disabled'] =$this->lIl1lII ?I9535 :' disabled'; $IILIIL1 =$this->db; $this->db =new CMS_IteratorFiles($this->module); $this->browser->InitSQL(I9539, "FROM cms_files ", "WHERE 1 " );$aCustom['fields'] =Array( 'item'=>Array(I9540=>'callback', 'object'=>&$this, 'method'=>'_CBItem') );$aCustom[I9541] =I9539; $aCustom['legend'] =Array(); if(is_object($this->filter)) {$this->filter->UpdateField("offset", $this->browser->Position); $aCustom['list_data']['filter_hidden_fields'] =$this->filter->GetFieldsAsHidden(); }$aCustom[I9542]["action"] ="apply"; $public ="checked"; if(sizeof($this->cms->VarsPost) >0) {$public =isset($this->cms->VarsPost[I9537]) ?$this->cms->VarsPost[I9537] :null; }elseif(isset($this->cms->VarsCookie[$this->moduleName."_public"])) {$public =$this->cms->VarsCookie[$this->moduleName.I9543]; }$aCustom[I9542][I9537] =empty($public) ?"": "checked"; $this->appliedId =-1; $this->id =-1; parent::TTTlI11($vData, $aCustom); $this->db =$IILIIL1; }function _CBItem(&$aItem, &$aData){ $aItem["name"] =htmlspecialchars($aItem["name"]); $aItem[I9544] =rawurlencode($aItem[I9544]); $ext ='.'.mb_strtolower(get_file_ext($aItem[I9544])); if (!empty($this->IlIllII[$ext])) {$aItem["icon"] =$this->IlIllII[$ext]; }else {$aItem["icon"] =$this->IlIllII['.']; }$aItem[I9545] =getBytesAsText($aItem[I9545], $this->words, 1); $aItem["disabled"] =$this->lIl1lII ?I9535 :' disabled'; }function TTT1IlI($aSql =Array(), $cId =0) {$aSql =$this->IlIllI1->TTIT1lI($aSql, $cId); $aSql[I9537] =intval(!empty($this->cms->VarsPost[I9537])); $aSql =parent:: TTT1IlI($aSql, $cId); return $aSql; }function TTIITT1($cId, $cModule) {$IIL1lLL =parent::TTIITT1($cId, $cModule); $this->IlIllI1->TTIITT1($cId, $cModule, $IIL1lLL); }}?>