<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       6397 xkqwsuizupqnqmlitxnkqmyrgkwgnrqlrrisirykmttmpqyiilqqluwrtngrmukwuwuypnir
 */ ?><?php foreach(array(10476=>'zSIiHSuJQ`GOG',10477=>"",10478=>"uDQ|IHSuJQ|OMntD",10479=>'md|UdqR',10480=>"IHSuJQD|tQIGJZtQD|JZnPD",10481=>'WHntQnt',10482=>"SZtQfrHI",10483=>"?zNs?",10484=>"|JMDt%OMnt",10485=>'frHnt',10486=>'iHSuJQoDtwJMQntD`GOG',10487=>"nZIQ",10488=>"fJt|rQDQJJQr",10489=>"ZJJ|rQDQJJQrD") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} require_once $GLOBALS['CLASSES_PATH'] .I10476; class ModuleHst extends AdmModule {public $lIL1l1I; public $resellerId; function ModuleHst(&$cms, &$db, &$cModule) {$this->lIL1l1I =Array(); parent::AdmModule($cms, $db, $cModule); }function _Init($IIll1l1 =Array(), $IIll1LI ="", $IIll1Ll =I10477, $aOptions =Array()) {$IIIIL11 =array(); $IIIIL11["use_modified_date"] =false; $IIIIL11["filter_client_table"] ='s'; $IIIIL11[I10478] =true; $IIIIL11["reseller_field"] =I10477; $aOptions += $IIIIL11; $this->resellerId =intval($this->TTTTlTl()); parent::_Init($IIll1l1, $IIll1LI, $IIll1Ll, $aOptions); if ($this->TTTTlTI()){ $this->cms->Gui->AddGlobalVars(array(I10479 => 1)); }if($aOptions[I10478]) {$lIL1l1l =$this->TIlTT1l(); $path ='_local/_admin/templates/'; $module =$this->module->GetOwnerName().".".$this->moduleName; $vMod =&$this->cms->Core->GetModule(I10480); $vMod->InitEngine($this->cms, $this->db); $Ill1ILI =$vMod->Engine->TTlTl1l($lIL1l1l, $path, $module); $Ill1ILI['name'] =$lIL1l1l; $Ill1ILI['form_hint'] =$Ill1ILI[I10481]['form_hint']; $Ill1ILI['list_hint'] =$Ill1ILI[I10481]['list_hint']; $this->lIL1l1I =$Ill1ILI; }}function TTTlIII() {parent::TTTlIII(); if($this->filter->issetField("datefrom")) $this->filter->TITI1l1(I10482); if($this->filter->issetField("dateto")) $this->filter->TITI1l1("dateto"); }function _ApplyFilters($prefix ='', $bodyType ='', $IIlLLl1 =true) {$res =parent::_ApplyFilters($prefix, $bodyType, $IIlLLl1); if(!empty($this->options['filter_client_table']) && $this->TTTTlTI()){ $res .= " AND ".$this->options['filter_client_table'].".id_member=".$this->TTTTlII(); }if($this->options['reseller_field'] && $this->resellerId >0) {$res .= I10483.$this->options['reseller_field']." = ".$this->resellerId; }return $res; }function TTTlI11(&$vData, &$aCustom) {if($this->options[I10478]) {$aCustom['list_data']['list_hint'] =$this->cms->Gui->get($this->moduleName.I10484, $this->lIL1l1I); $vData['form_hint'] =$this->cms->Gui->get($this->moduleName."_subform:hint", $this->lIL1l1I); }parent::TTTlI11($vData, $aCustom); }function TTTll11($cId, $cModule) {parent::TTTll11($cId, $cModule); }function TTTl1lI($cId, $cModule) {parent::TTTl1lI($cId, $cModule); }function TTT1IlI($aSql =Array(), $cId =0) {$aSql =parent::TTT1IlI($aSql, $cId); return $aSql; }function TIlTT1l() {return $this->moduleName."_help.lng"; }function TIlTT11($db =false, $langData ='', $lILILIl =false) {if($this->TTTTlTI() || $this->TTTTII1()) {return; }if($this->resellerId == 0 && $this->realSide != I10485) {if($lILILIl === false && $db !== false) {require_once $GLOBALS['CLASSES_PATH'] .I10486; $lILILIl =ModuleHstClients::TIlTT1I($db, $langData); }$lIL1l1L =Array(); $lIL1l1L[$this->words["all_resellers"]] ="all_resellers"; $lIL1l1L[$this->words["none"]] =0; if(is_array($lILILIl) && count($lILILIl)) {foreach ($lILILIl as $lIL1l11) {$lIL1l1L[$lIL1l11[I10487]] =$lIL1l11["id_member"]; }}$lIL1LII =$this->filter->AddItemsToMultiField(Array(), $lIL1l1L, 50); $this->filter->AddField("flt_reseller", "select", isset($this->cms->Vars["flt_reseller"]) ?stripslashes(unhtmlentities($this->cms->Vars[I10488])) :"all_resellers", "all_resellers", " = ", $this->options['reseller_field'], $lIL1LII); if($this->filter->GetFieldValue(I10488) == I10489) {$this->filter->DisableFieldSql(I10488); }}}}?>