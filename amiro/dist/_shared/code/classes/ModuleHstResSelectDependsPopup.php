<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       4058 xkqwuuilxrwixswisqxlnlwxysqqzinyzwxirzziqqrlwwglqttwllzpxniuxzztpwntpnir
 */ ?><?php foreach(array(11011=>"ZJJHCQS|ZWtMHnD",11012=>"OMSSQn",11013=>"?,=?",11014=>"ZSSQS|rQD|SQG",11015=>"SQfZuJt|GrQfMx",11016=>'tZYJQD',11017=>'LHMnD',11018=>'jqFT',11019=>"nZIQ",11020=>"ZWtMHn",11021=>'WID|ODt|GKP|rQD',11022=>"JQP|YJuQ",11023=>"ZSS") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ModuleHstResSelectDependsPopup extends ModuleHstRes {function ModuleHstResSelectDependsPopup(&$cms, &$db, &$cModule) {parent::ModuleHstRes($cms, $db, $cModule); }function _Init($IIll1l1 =Array(), $IIll1LI ="", $IIll1Ll ="", $aOptions =Array()) {$IIIIL11[I11011] =Array ("select"); $IIIIL11['group_operations'] =Array("select"); $aOptions += $IIIIL11; parent::_Init($IIll1l1, $IIll1LI, $IIll1Ll, $aOptions); }function TTTlIII() {parent::TTTlIII(); $this->filter->AddField("mode", I11012, stripslashes(unhtmlentities($this->cms->Vars["mode"]))); $this->filter->AddField("id_slave", I11012, intval($this->cms->Vars["id_slave"]), "", I11013, "r.id"); $this->filter->AddField("dest_field_id", I11012, stripslashes(unhtmlentities($this->cms->Vars["dest_field_id"]))); $this->filter->AddField("added_res_dep", I11012, stripslashes(unhtmlentities($this->cms->Vars[I11014]))); }function TTT11Tl(&$IILILII) {}function TTTlI11(&$vData, &$aCustom) {$lI1lllL =Array(); if($this->filter->GetFieldValue('id_slave')) {$lI1lllL[] =$this->filter->GetFieldValue('id_slave'); }$exclude =''; if(count($lI1lllL)) {$exclude =' AND '.$this->options[I11015]."id!=".implode(' AND '.$this->options[I11015]."id!=", $lI1lllL); }$this->browser->InitSQL("r.id, r.name, r.type, r.is_deleteable, count(p.id_res) as pkg_res ", Array( I11016=>Array('r' => 'cms_hst_res', 'p'=>'cms_hst_pkg_res'), I11017=>Array("r|p"=>"r.id=p.id_res"), 'joins_types'=>Array('r|p'=>I11018) ),"WHERE 1 $exclude ".$this->_ApplyFilters().$this->TTTlIl1(), "r.id", "name", "id desc" );$aCustom["fields"] += Array( I11019=>Array("action"=>"stripline", "size"=>120), "type"=>Array(I11020=>"stripline", "size"=>64), );$this->browser->AddSQLJoinedTables($this->cms->Core, 'r', array('p'=>I11021)); $aCustom["applied_id"] ="id"; $aCustom["legend"] =Array("leg_yellow", I11022, "leg_edit", "leg_del"); $aCustom["form_data"]["buttons"] =Array(I11023, "apply", "cancel", "save"); parent::TTTlI11($vData, $aCustom); }}?>