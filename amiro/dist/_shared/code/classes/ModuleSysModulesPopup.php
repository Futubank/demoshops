<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       8807 xkqwpwmxwrtzguspwsxligzznutsxilzuwutriznlmiyrygzxlwynrtgwittgzszlslnpnir
 */ ?><?php foreach(array(12886=>'WHnfMP',12887=>'IHSuJQ|JMnK',12888=>'GZrQnt',12889=>'ZWtMHnD',12890=>'GJuPMn|MS',12891=>"SZtQtH",12892=>"GIZnZPQr",12893=>'JMDt|IHSuJQD',12894=>"",12895=>'fMrDt|IHS|MS',12896=>"JMnK",12897=>"IHSuJQD",12898=>'Drv|JMWQnWQ',12899=>'GZPQ|404',12900=>"|SMDZYJQS",12901=>'GrMnt|vQrDMHn',12902=>'IHSuJQ|MWHn',12903=>'IHSmS',12904=>"%IHSuJQ",12905=>"JMDt|IHSuJQD") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ModuleSysModulesPopup extends CMS_ActModule {public $lllILI1; function ModuleSysModulesPopup(&$cms, &$db, &$cModule) {parent::CMS_ActModule($cms, $db, $cModule); if ($this->cms->Core->IsInstalled('plugins_wizard')) {$lllIlLI =$this->cms->Core->GetModProperty('plugins_wizard', I12886); $IIL111L =&$this->cms->Core->GetAllModules(); foreach (array_keys($IIL111L) as $vModName) {$vMod =&$IIL111L[$vModName]; if ($vMod->issetOption(I12887)) {$modLink =$vMod->GetOption(I12887); if(!empty($modLink['owner'])){ $vMod->Owner =$modLink['owner']; }if(!empty($modLink['parent'])){ if ($this->cms->Core->IsInstalled($modLink['parent'])) {$lllILlI =&$IIL111L[$modLink[I12888]]; $lllILll =$lllILlI->issetProperty('inherit_rights') ?$lllILlI->GetProperty('inherit_rights') :array ();$lllILll[] =$vModName; $lllILlI->SetProperty('inherit_rights', $lllILll); }}elseif($vMod->issetOption('plugin_id')){ $vMod->SetProperty(I12889, true); $vMod->SetOption('start_disable', false); $vMod->SetOption('plugin_icon_link', $GLOBALS['ROOT_PATH_WWW'] .'_local/_admin/images/' .$vMod->GetOption(I12890) .'/' .$vMod->GetOption('icon')); }}}}}function TTTlIII() {parent::TTTlIII(); if($this->filter->issetField("datefrom")) $this->filter->TITI1l1("datefrom"); if($this->filter->issetField(I12891)) $this->filter->TITI1l1(I12891); }function &TTTlI1T(&$aCustom) {$data =parent::TTTlI1T($aCustom); $data["scripts"] =$this->cms->Gui->getScripts(); $data["metas"] =$this->cms->Gui->getMetas(); $data["status"] =$this->cms->GetStatusMessages(); global $conn; print $this->cms->Gui->get($this->module->GetName(), $data); $conn->Out(); die(); }function TTTlT1l() {return $this->cms->Core->IsSysUser() ?SYS_A_RIGHT :0; }function TTTlT1T($IIIL11l,$id,$cModule,&$IIlLI1l) {return $this->cms->Core->IsSysUser() ?$IIIL11l :'none'; }function TTTlI11(&$vData, &$aCustom){ $vOwners =&$this->cms->Core->GetOwnersList(); $lllILlL =false; $lllILl1 =AMI_ModDeclarator::getInstance()->getRegistered(); foreach($vOwners as $vName => $lllIlLl){ if($vName =I12892){ $lllILlL =true; break; }}if($lllILlL){ $lllILLI =array(I12892=>$vOwners[I12892]); $vOwners =$lllILLI +$vOwners; }$IIL111L =&$this->cms->Core->GetAllModules(); $cols =4; $vData[I12893] =''; foreach($vOwners as $vName=>$lllIlLl){ if(!isset($lllIlLl["menu_name"])){ continue; }$lllILLl =""; $lllILLL =array(); $lllILLL["description"] =I12894; if(!$this->cms->Core->IsOwnerInstalled($vName)){ $lllILLl ="_disabled"; }if(isset($lllIlLl['admin_link'])){ $lllIlLL =$lllIlLl['admin_link']; }elseif(isset($lllIlLl['first_mod_id'])){ $vMod =&$this->cms->Core->GetModule($lllIlLl[I12895]); $lllIlLL =$vMod->GetAdminLink(); unset($vMod); }$lllILLL["link"] =$lllIlLL; $lllILLL["caption"] =$lllIlLl["menu_name"]; $lllILLL["name"] =$vName; if(empty($lllILLL[I12896])){ continue; }$i =$col =$row =0; $lllILLL[I12897] =I12894; foreach($IIL111L as $vModName=>$lllIlLl){ $vMod =&$IIL111L[$vModName]; $section ='eshop_cart' !== $vModName ?$vMod->GetOwnerName() :'pmanager'; if( $vName != $section || $vMod->TTlITTT() === false || I12898 === $vModName || ((!$vMod->IsAdminAllowed() || $vMod->issetAndTrueOption('start_disable')) && !in_array($vModName, array('relations', I12899, 'print_version', 'sitemap', 'eshop_cart')) )){continue; }$vItemData =array(); $lllILL1 =I12894; $vItemData["description"] =I12894; if(!$vMod->IsInstalled()){ $lllILL1 =I12900; }$vItemData[I12896] =$vMod->GetAdminLink(); $vItemData["name"] =$vModName; $vItemData["caption"] =$this->cms->GetModHeader($vMod); if( (empty($vItemData['link']) || '' != $vMod->GetParentName()) && !in_array($vModName, array(I12899, I12901, 'eshop_cart')) ){continue; }if ($vMod->issetOption('plugin_icon_link')) {$vItemData[I12902] =$vMod->GetOption('plugin_icon_link'); }elseif(in_array($vModName, $lllILl1)){ $vItemData[I12902] =AMI_Service::getModResourceURL( 'mod_icon', array(I12903 => $vModName) );}if($i && (($col %$cols) == 0) ){$lllILLL[I12897] .= $this->cms->Gui->getAbs($this->module->GetName().":VSplitter"); $row++; $col =1; }else{ $col++; if($i){ $lllILLL[I12897] .= $this->cms->Gui->getAbs($this->module->GetName().":HSplitter"); }}$i++; $lllILLL[I12897] .= $this->cms->Gui->get($this->module->GetName().I12904.$lllILL1, $vItemData); }$vData[I12905] .= $this->cms->Gui->get($this->module->GetName().":owner".$lllILLl, $lllILLL); }}}