<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    core 
 * @version    $Id$ 
 * @size       3962 xkqwxtgltsgumqkgtlynugnnnrypxlyuigrszyxyzqzkllitpqpnuuiiggxrulutpplkpnir
 */ ?><?php foreach(array(13103=>'qDOHGzSIMn`GOG',13104=>"",13105=>'MS',13106=>'|DuYfHrI%',13107=>"?:") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} class ModuleTaxes extends CMS_ActModule {public $lllI1lL; public $lllI1l1; public $baseCurrency; public $lllI1LI; public $oEshop; public $lllI1Ll; public $lllI1LL; function ModuleTaxes(&$cms, &$db, &$cModule) {parent::CMS_ActModule($cms, $db, $cModule); if ($this->cms->Core->Side == "admin") {require_once $GLOBALS['CLASSES_PATH'] .I13103; $this->oEshop =new EshopAdmin($this->cms, $this->words); $this->oEshop->init($this->moduleName); }else {CreateEshop($cms); $this->oEshop =&$cms->Eshop; }$this->lllI1Ll =$this->cms->Core->GetModOption("eshop_tax_classes", "tax_system"); $this->lllI1LL =$this->cms->Core->GetModOption("eshop_tax_classes", "charge_tax_type"); }function _Init($IIll1l1 =Array(), $IIll1LI =I13104, $IIll1Ll =I13104, $aOptions =Array()) {parent::_Init($IIll1l1, $IIll1LI, $IIll1Ll, $aOptions); }function _InitAdmin() {parent::_InitAdmin(); $this->baseCurrency =$this->oEshop->getCurrencyPrefix($this->oEshop->baseCurrency) .$this->oEshop->getCurrencyPostfix($this->oEshop->baseCurrency); $this->lllI1LI =array( "percent" => "%", "abs" => $this->baseCurrency );$this->lllI1lL =$this->TIl1lTI(); $this->lllI1l1 =$this->TIl1lTT(); }function TIl1I11($fieldName, $setName, &$aData, $selected =null, $lIIIIlL =false) {$options =''; foreach($aData as $id => $name) {$aRowData =array( I13105 => $id, 'name' => isset($this->words[$name]) ?$this->words[$name] :(isset($this->cms->Words[$name]) ?$this->cms->Words[$name] :$name), 'selected' => $id === $selected ?' selected' :'' );$row =$this->cms->Gui->getAbs($this->moduleName .I13106 .$setName, $aRowData); if ($lIIIIlL) {$row =trim($row); }$options .= $row; }return $options; }function _getTaxTypeCB(&$aItem, &$aData) {$aItem["type"] =$aItem["tax_type"] == "abs" ?" " .$this->baseCurrency :I13107; if($aItem["tax_rate"] == 0) {$aItem["type"] =I13104; }}function TIl1lTT() {$sql ="SELECT id FROM cms_es_tax_zones WHERE lang='".$this->langData."' AND is_default = 1"; return intval($this->db->getValue($sql)); }function TIl1lTI() {$sql ="SELECT id FROM cms_es_tax_classes WHERE lang='".$this->langData."' AND is_default = 1"; return intval($this->db->getValue($sql)); }}?>