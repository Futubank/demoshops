<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       7006 xkqwyglgmnywzsgwwtyuggikgskgmqyxlwxswuxwyqqpknrrukgwlpixrksmylywtmukpnir
 */ ?><?php foreach(array(13669=>'gmNs|Tmwk',13670=>'',13671=>'WHuntQr|WHunt',13672=>'_',13673=>"grZPIZ%?nH+WZWOQ",13674=>'GrHPrQDD|MS',13675=>'\n',13676=>'0',13677=>'DtZtuD|IQDDZPQ',13678=>'IQDDZPQ',13679=>"'",13680=>'tMWK',13681=>'fZJDQ') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} define('PIND_BAR', 0x01); define('PIND_COUNTER', 0x02); define(I13669, 0x04); define('PIND_ALL', 0x07); class ProgressIndicator {public $header; public $statusMsg; public $percent; public $lll11II; public $count; public $output; public $lll11Il; public $gui; public $block; public $interval; public $time; public $debug; public $lll11IL; public $lll11I1; function ProgressIndicator(&$gui,$block) {$this->header =''; $this->statusMsg =''; $this->percent =0; $this->lll11II =false; $this->count =0; $this->output =false; $this->lll11Il =0; $this->block =$block; $this->gui =&$gui; $this->interval =2; $this->time =array(PIND_COUNTER=>0,PIND_BAR=>0,PIND_TICK=>0); $this->debug =false; $this->lll11I1 =array( 'controls_mask' => I13670, 'controls_show' => I13670, 'header' => I13670, 'status_message' => I13670, 'status_error' => I13670, I13671 => I13670, 'counter_label' => I13670, 'bar_percent' => I13670, 'tick' => I13670, 'close_button' => I13670 );}function TI1TI11($type) {$t =time(); if($t-$this->time[$type]>$this->interval) {$this->time[$type] =$t; return true; }return false; }function TI1TlTT($str) {TlT1lTT($this->lll11IL, implode(I13672, $this->lll11I1)); $this->lll11I1['tick'] ='0'; global $conn; if(!$this->output) {$conn->AddHeader("Expires: Mon, 26 Jul 1997 05:00:00 GMT"); $conn->AddHeader("Cache-Control: no-cache, no-store, must-revalidate, post-check=0, pre-check=0"); $conn->AddHeader(I13673); $conn->Out(); while(@ob_end_flush()); $this->output =true; }echo $this->debug ?htmlspecialchars($str) :$str; flush(); }function show() {$this->lll11IL =TlT1I11(); $vars =array( 'pi_header' => $this->header, 'pi_status' => $this->statusMsg, 'pi_cntlabel' => $this->lll11II, 'metas' => $this->gui->getMetas(), I13674 => $this->lll11IL );$this->TI1TlTT(str_pad($this->gui->get("$this->block:progress_indicator",$vars), 140000, ' ')); }function _quote($str) {$str =str_replace('"','\"',$str); $str =str_replace("\r\n",I13675,$str); $str =str_replace("\n",I13675,$str); return $str; }function TI1TlTI($mask,$show=true) {if($this->TI1TlTl($mask,$show)) return; if($show) {$this->lll11Il |= $mask; }else {$this->lll11Il &= ~$mask; }$this->lll11I1['controls_mask'] =$mask; $this->lll11I1['controls_show'] =$show ?'1' :I13676; $this->TI1TlTT($this->gui->getAbs("$this->block:pi_show_controls", array('mask'=>$mask,'show'=>$show?'true':'false'))); }function TI1TlTl($mask,$lll11lI=true) {if($lll11lI) return ($this->lll11Il &$mask)==$mask; return ($this->lll11Il &$mask)==0; }function TI1TI1T($message,$error=false) {$this->statusMsg =$message; $this->lll11I1[I13677] =$this->_quote($this->statusMsg); $this->lll11I1['status_error'] =$error ?'1' :I13676; if($this->output) {$error =$error ?'true' :'false'; $message =$this->_quote($this->statusMsg); $this->TI1TlTT($this->gui->getAbs("$this->block:pi_set_status_msg", array(I13678=>$message,'error'=>$error))); }}function setHeader($message) {$this->header =$message; $this->lll11I1['header'] =$this->_quote($this->header); if($this->output) {$message =$this->_quote($this->header); $this->TI1TlTT($this->gui->getAbs("$this->block:pi_set_header", array(I13678=>$message,))); }}function TI1TlT1($count,$lll11ll=false,$label=false) {$this->count =$count; $this->lll11I1[I13671] =$count; if($label!==false){ $this->lll11I1['counter_label'] =$this->_quote($label); $this->lll11II =$label; }if($this->output && ($lll11ll || $this->TI1TI11(PIND_COUNTER))) {$label =$label!==false ?",'".$this->_quote($label).I13679 :I13670; $this->TI1TlTT($this->gui->getAbs("$this->block:pi_set_counter", array('count'=>$count,'label'=>$label))); }}function TI1TlIT($percent,$lll11ll=false) {$this->percent =$percent; $this->lll11I1['bar_percent'] =$percent; if($this->output && ($lll11ll || $this->TI1TI11(PIND_BAR))) {$this->TI1TlTT($this->gui->getAbs("$this->block:pi_set_bar", array('percent'=>$percent))); }}function tick() {$this->lll11I1[I13680] ='1'; if($this->output && $this->TI1TI11(PIND_TICK)) {$this->TI1TlTT($this->gui->getAbs("$this->block:pi_tick",array())); }}function TI1TlII($enable=true) {$this->lll11I1['close_button'] =$enable ?'1' :I13676; $enable =$enable ?'true' :I13681; if($this->output) {$this->TI1TlTT($this->gui->getAbs("$this->block:pi_enable_close_button", array('enable'=>$enable))); }}function TI1TlIl($msg) {$this->TI1TI1T($msg,true); }}?>