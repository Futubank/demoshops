<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       3650 xkqwpzmqwgsskgnngtugzuxpxqlgnnutmxwgrspsqlsklwuztuiwwxsqtqrwgrxwzxiupnir
 */ ?><?php foreach(array(13682=>'wjzddqd|gzTo',13683=>'') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} require_once $GLOBALS['CLASSES_PATH'] .'BaseObject.php'; require_once $GLOBALS[I13682] .'RPCObject.php'; require_once $GLOBALS[I13682] .'SocketConnection.php'; class RPCClient extends BaseObject {public $url; public $auth; public $to; public $rpc; public $conn; public $lll11lL; function RPCClient($url,$auth=false,$timeout=40) {$this->BaseObject(); $this->url =$url; $this->auth =$auth; $this->to =$timeout; $this->rpc =null; $this->conn =null; $this->lll11lL =true; $this->_ns =''; }function TI1TlI1($ns=false) {if($ns!==false) $this->_ns =$ns; return $this->_ns; }function TT1lTIl() {if($this->rpc!=null) return true; $conn =new SocketConnection($this->url,$this->to); if(!$conn->connect()) {$this->conn =null; return $this->TTTITll($conn); }$this->conn =&$conn; $this->rpc =new RPCObject($conn); return true; }function _close() {$this->rpc =null; if($this->conn!=null) $this->conn->disconnect(); $this->conn =null; }function TI1TllT($name,$args,$lll11l1=true) {if(!$this->TT1lTIl()) return false; if($this->auth!==false) {if($this->rpc->TI1T1IT('__auth',array(0=>$this->auth))===false) return $this->TTTITll($this->rpc); $this->auth =false; }$ns =$this->TI1TlI1(); if($ns!=I13683 && $lll11l1) $name ="$ns::$name"; if(($res=$this->rpc->TI1T1IT($name,$args))===false) $this->TTTITll($this->rpc); if($this->TI1TllI()) {$this->rpc->TI1Tlll(); $this->_close(); }return $res; }function TI1TllI($yes='undef') {if($yes!=='undef') $this->lll11lL =$yes ?true :false; return $this->{_autofinish}; }function auth($auth) {$this->auth =$auth; return true; }function TI1Tlll($lll11LI=true) {if(!$this->TT1lTIl()) return false; $res =$this->rpc->TI1Tlll(); $this->_close(); return $lll11LI ?true :$res; }}?>