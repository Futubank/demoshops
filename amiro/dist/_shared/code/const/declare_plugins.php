<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       2276 xkqwstsxzskpzgxpixrrsxznuzsspsskkktipignlignmymzpxrnwiynnllpstlkkxlgpnir
 */ ?><?php foreach(array(17129=>"GJuPMnD|CMAZrS",17130=>"dqjqwT?[?FRhi?WID|GJuPMnD?coqRq?MD|MnDtZJJQS=1?hR?MD|fMrDt|run=1?hRsqR?yb?MS?ZDW",17131=>'MD|MnDtZJJQS',17132=>'GJuPMn|IHSuJQ',17133=>'wid|mnDtZJJZYJQgJuPMn`GOG',17134=>'FmRdT|gjUpmN|RUN',17135=>"ZJJHC|OMSQ|IQnu") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $Core->SetOwner("plugins"); $vMod =&$Core->AddModule("plugins_wizard", 0); $vMod->SetAdminAllowed(1); $vMod =&$Core->TTllTI1(I17129, "plugins", 0); $aAllPlugins =array(); $lLI1LlL =false; $sql =I17130; $rs =&$db->select($sql, DBC_SYS_QUERY); while($plugin =$rs->nextRecord()) {if($plugin[I17131]) {$aAllPlugins[$plugin[I17132]] =$plugin; }$lLI1LlL =$lLI1LlL || $plugin['is_first_run']; }require_once $GLOBALS['CLASSES_PATH'] .I17133; $PLUGINS_COUNT =isset($GLOBALS['FORCE_PLUGINS_COUNT']) && (int)$GLOBALS['FORCE_PLUGINS_COUNT'] >0 ?(int)$GLOBALS['FORCE_PLUGINS_COUNT'] :20; for($i =1; $i <= $PLUGINS_COUNT; $i++) {$modName =CMS_InstallablePlugin::GetPluginName($i); $vMod =&$Core->AddModule($modName, 0, 'none'); if(isset($aAllPlugins[$i])) {$vMod->SetAdminAllowed(!empty($aAllPlugins[$i]['admin'])); $vMod->TTlIT1T(!empty($aAllPlugins[$i]['specblock'])); }else {$vMod->SetAdminAllowed(0); }}define(I17134, $lLI1LlL); unset($lLI1LlL); if(FIRST_PLUGIN_RUN) {$sql ="UPDATE cms_plugins SET is_first_run=0 WHERE is_first_run=1"; $db->execute($sql); }$Core->OwnerSetData("plugins","taborder", 10000); $Core->OwnerSetData("plugins",I17135, true); 