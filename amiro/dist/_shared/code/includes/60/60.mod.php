<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @package    Module 
 * @version    $Id$ 
 * @size       4584 xkqwqsnsrzrmkziniwpglzssqyrgtwxsqklnziqqqmgswmnztmlipnukllxsymqrpzrmpnir
 */ ?><?php foreach(array(19310=>'Qnv~rQEuQDt',19311=>'ZIM|DKMG|50|IHSuJQ',19312=>'JZnP|SZtZ',19313=>'WHrQ',19314=>'ZWtMvQ|JZnP',19315=>'ZIM|DGQWYJHWK|IHSQ',19316=>'ihsUjq|gmwTURqd|gzTo',19317=>'zim~iHSuJQ~qnvMrHnIQnt~qxtQnDMHn~Qxt|WZtQPHrB~QnZYJQwZtFMJtQr',19318=>'~IHSuJQ~WHntrHJJQr~frn',19319=>'DtZtuD|IDP',19320=>'IDP',19321=>'DtZtuD|IQDDZPQD',19322=>'uDQ|WZnHnMWZJ') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $modId =$ActiveModule; $lLI111I =(int)(isset($mode) && $mode == 'small'); define('AMI_60', true); if(!$lLI111I){ require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .'init.php'; }AMI_Registry::set('modId', $modId); AMI::addResourceMapping(require($CLASSES_PATH .'60/resourceMapping.php')); AMI::addResourceMapping(require($CLASSES_PATH .'60/resourceMapping.60.php')); $oRequest =AMI::getSingleton(I19310); $oResponse =AMI::getSingleton('response'); AMI_Registry::set('ami_small_mode', $lLI111I); AMI_Registry::set(I19311, true); if(!AMI_Registry::exists('lang_data')){ $lang =$vGlobVars['active_lang']; AMI_Registry::set(I19312, $lang); AMI_Registry::set('lang', $lang); AMI_Registry::get('oGUI')->_setLang($lang); unset($oTpl); }else{ $lang =AMI_Registry::get(I19312); AMI_Registry::set('lang', $lang); }AMI::getSingleton('env/session', AMI::getOption(I19313, 'allow_multi_lang') ?array('locale' => $lang) :array()); $aDateFormats =AMI::getOption(I19313, 'dateformat_front'); AMI_Registry::get('oGUI')->addGlobalVars( array( I19314 => $lang, 'date_format' => preg_replace('/ .*$/', '', isset($aDateFormats[$lang]) ?$aDateFormats[$lang] :$aDateFormats['en']) ));if($lLI111I){ AMI_Registry::set(I19315, TRUE); }AMI_Registry::set('CUSTOM_PICTURES_HTTP_PATH', "_mod_files/ce_images/"); AMI_Registry::set(I19316, AMI_Registry::get('path/root')."_mod_files/"); AMI_Registry::set('LOCAL_FILES_REL_PATH', "_local/"); AMI_GlobalFilters::setGlobalFilter('side'); AMI_Registry::set(I19317, TRUE); $oController =AMI::getResource($modId .I19318, array($oRequest, $oResponse)); $oController->init(); $aEvent =array(); AMI_Event::fire('dispatch_request', $aEvent, $modId); if($lLI111I){ $blockName =$frn->Core->getModProperty($modId, 'active_spec_blocks'); $content =$oController->getSpecblock($blockName); $frn->SetSpecialBlock($blockName, $content); unset($lLI111I, $content, $blockName); AMI_Registry::delete(I19315); }else{ if(isset($frn->VarsGet[I19319]) || isset($frn->VarsCookie[I19319])){ $msg =stripslashes(isset($frn->VarsGet[I19319]) ?$frn->VarsGet[I19319] :$frn->VarsCookie[I19319]); $arr =unserialize(unhtmlentities($msg)); if(is_array($arr) && is_array($arr['sys']) && is_array($arr['plain'])){ foreach(array('sys', 'plain') as $source){ foreach($arr[$source] as $k => $v){ if(is_array($v) && isset($v[I19320])){ $msg =strip_tags(preg_replace('/<script[^>]*>.*?<\/script[^>]*?>?/si', '', $v[I19320])); $frn->TTITIlI($msg); $arr[$source][$k][I19320] =$msg; }else{ unset($arr[$source][$k]); }}}$frn->TTITIlT($arr['sys'], $arr['plain']); }}$frn->SetSpecialBlock(I19321, $frn->GetStatusMessages()); if(AMI::getSingleton('env/cookie')->get(I19319, FALSE)){ SetLocalCookie(I19319, '', time() +1); }$aViews =$oController->getViews(); $HtmlBody =''; foreach($aViews as $oView){ $HtmlBody .= $oView->get(); }$oController->processSEO(); if($frn->Core->TTlI1T1('pages', I19322)) {$oController->processCanonical(); }}$oController->__destruct(); unset($oController); AMI_Registry::delete(I19317); 