<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       24708 xkqwrzqtwsiwmnmttrgmwzgprzyurttuxqyplnklwmssssupirnpgsnywguswznmknrypnir
 */ ?><?php foreach(array(18263=>"ZutHrQSMrQWt|tH|IHSuJQD",18264=>"uO|GrQv|IHS",18265=>"uO|GrQv|urJ",18266=>"GZPQ|YHSB",18267=>"OQZSQrD",18268=>"KQBCHrSD",18269=>"GZPQD",18270=>"jZDt+iHSMfMQS%?",18271=>"YHSB",18272=>"#DGQW|IZrK?nZIQ=DGQW|IHSuJQ|YHSB@#~DGQW|IZrK@",18273=>"#DGQW|IZrK|?nZIQ=DGQW|IHSuJQ|YHSB@#~DGQW|IZrK|@",18274=>'}`[{|\S-$~',18275=>"DY|SZtZ",18276=>'Qnv~rQEuQDt',18277=>"ZWtMvQ|DGQW|YJHWKD",18278=>'~IHSuJQ~WHntrHJJQr~frn',18279=>'ZIM|DGQWYJHWK|MS',18280=>"DGQW|IHSuJQ|YHSB",18281=>"DQGZrZtQ|DuYIQnuQD",18282=>"DBD",18283=>"JMnK",18284=>"",18285=>'GZrQnt|MS',18286=>'MnDtZJJQS|JZnPD',18287=>"\"",18288=>"rQGJZWQ",18289=>'QDOHG|HrSQr',18290=>'nQCD',18291=>'uDQ|WZtQPHrMQD',18292=>'QDOHG|MtQI',18293=>'tHSZB',18294=>"ZWtMvQ|IHSuJQ?=?'",18295=>"'!\r\n",18296=>"ZWtMvQ|IHSuJQ|HCnQr?=?'",18297=>"ZWtMvQ|IHSuJQ|OZD|WZtQPHrMQD?=?",18298=>"ZWtMvQ|IHSuJQ|QJQIQnt|MS?=?'",18299=>"ZWtMvQ|IHSuJQ|WZtQPHrB|MS?=?'",18300=>"ZWtMvQ|IHSuJQ|JMnK?=?'",18301=>'DWrMGt|fuJJ|JMnK',18302=>'ZIM|QfQ',18303=>'GZPQ~OQZSQr',18304=>'vZr?ZWtMvQ|IHSuJQ|GZPQ|OQZSQr?=?"',18305=>'vZr?ZWtMvQ|IHSuJQ|GZPQ|MS?=?"',18306=>'vZr?ZWtMvQ|IHSuJQ|WZtQPHrB|OQZSQr?=?"',18307=>'GZPQ~WZtoQZSQr',18308=>'truQ',18309=>'~;CCC`~',18310=>'|ZSIMn~',18311=>'QDOHG|WZt',18312=>'<IMS=',18313=>']DWrHJJ|tH|fHrI=1',18314=>"???IHSuJQoQZSQr%'",18315=>"???GZrQntoQZSQr%'",18316=>"???IHSuJQzJJHCQS%?",18317=>"!\r\n",18318=>"???MDVMrtuZJ%?",18319=>'WZGtMHn',18320=>'fQQSYZWK',18321=>'ZIM|IuJtMfQQSD',18322=>'IHSmS',18323=>'vZr?ZqSMtZYJQiHSuJQD=',18324=>'"!',18325=>'GrQfMx',18326=>'GHDtfMx',18327=>'QDOHG|WZrt',18328=>'IZrK|MtQID|Mn|WZrt',18329=>"DGQW|IZMn|IQnu|DuY",18330=>'JHWZJQ',18331=>'ZIM|IHS|vMQC|tBGQ',18332=>"sqyUp|TqigjzTq",18333=>"|MGZrt") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} if (!$frn->Core->IssetAndTrueProperty("disable_autoredirect") && ($frn->Core->Cache->ILI1LIl == "POST") && $frn->Core->issetModOption($frn->ActiveModule->GetName(), I18263)) {$lLll1II =$frn->Core->GetModOption($frn->ActiveModule->GetName(), I18263); if ((in_array($frn->VarsCookie[I18264], $lLll1II) || in_array('all', $lLll1II)) && isset($frn->VarsCookie["uh_prev_url"]) && $frn->VarsCookie["uh_prev_url"]) {AMI_Debug::checkSelfRedirection('done', $frn->VarsCookie[I18265]); echo $frn->Gui->Parse("templates/redirect.tpl", array('location' => $frn->VarsCookie[I18265])); die; }}$frn->Core->SetProperty("disable_autoredirect", false); $bench_time['done_start'] =microtime(); $frn->Gui->ForceExport =false; if ($frn->Core->GetOption("allow_layouts_export")) {$lLll1Il =$frn->Core->GetOption("layouts_export_flag"); if (isset($frn->VarsGet[$lLll1Il]) && intval($frn->VarsGet[$lLll1Il]) == 1) {$frn->Gui->ForceExport =true; }}$Page =new Page($frn); $Page->LayBlocksCount =$frn->Core->GetModProperty("pages", "template_blocks_number"); $Page->TTll1lT($IlL1lll["layout_block_nums"]); EventApplyVars($frn, I18266, $ModuleHtml, $pageId); EventApplyVars($frn, "page_layouts", $IlL1lll, $pageId); AMI_Registry::set('page/header', $ModuleHtml["headers"]['__page_name']); if (!empty($ModuleHtml[I18267]["title"])) {$frn->Gui->setTitle($ModuleHtml[I18267]["title"]); }if (!empty($ModuleHtml[I18267]["keywords"])) {$frn->Gui->addMeta("name", I18268, $ModuleHtml[I18267][I18268], $frn->lang); }if (!empty($ModuleHtml[I18267]["description"])) {$frn->Gui->addMeta("name", "description", $ModuleHtml[I18267]["description"], $frn->lang); }$lLll1IL =$frn->Core->GetModOption(I18269, "page_changed_header_mode"); if($lLll1IL != "none"){ if($lLll1IL == "actual"){ $lLll1I1 =$ModuleHtml[I18267]["ulast_changed"]; }else{ $lLll1I1 =strtotime($lLll1IL); }$conn->AddHeader(I18270 .gmdate("D, d M Y H:i:s", $lLll1I1) ." GMT"); }$frn->Gui->addGlobalVars($frn->TTITllT()); $frn->Gui->disableGlobalVarsOnce(); if (!empty($ModuleHtml["body"])) {$frn->stopWorkingModule($ModuleHtml["body"]); $ModuleHtml[I18271] =I18272 .$ModuleHtml[I18271] .I18273; }$Page->TTll1lI($frn, $ModuleHtml, $IlL1lll, $HtmlBody); $lLll1lI =$frn->Gui->GetFoundVars(); $IllIL1I =""; $lLll1ll =array_keys($frn->Core->GetProperty("spec_blocks")); $mask ="spec_"; foreach ($lLll1lI as $vKey => $vVal) {$res =false; if (in_array($vVal, $lLll1ll)) {$frn->I1II11L[] =$vVal; }elseif (preg_match('/^' .quotemeta($mask) .I18274, $vVal, $res)) {$frn->I1II11L[] =$vVal; $frn->I1II111[$mask .$res[1]][] =$vVal; $frn->PageSpecMultiBlocksOptions[$vVal] =array("data" => $frn->TITlTIl($vVal)); }}$lLll1lL =$frn->ActivePageInfo["block_mask"]; if ($lLll1lL >0) {$lLll1l1 =Array(); $mask =1; for ($i =1; $i <= $Page->LayBlocksCount; $i++) {if (($lLll1lL &$mask) >0) {$lLll1l1[] =$i; }$mask =$mask << 1; }foreach ($lLll1l1 as $IlL1lLI) {$frn->Gui->removeFoundVars(); $frn->Gui->parseText($IlL1lll["layout_blocks"][$IlL1lLI]); $lLll1LI =$frn->Gui->GetFoundVars(); foreach ($lLll1LI as $varName) {if (in_array($varName, $frn->I1II11L)) {if (is_array($frn->ActivePageInfo["sb_data"][$varName]) && sizeof($frn->ActivePageInfo[I18275][$varName]) >0) {$Core->Cache->TT1TI1l("options", $frn->ActivePageInfo[I18275][$varName], $varName); }}}}}$Core->Cache->pageIsComplitedForSave =true; $lLll1Ll =$Core->Cache->IsCached() && $Core->Cache->TT1T11l(); if ($lLll1Ll) {$cached_mode =true; $lLll1LL =AMI_ModDeclarator::getInstance(); $lLll1L1 =$lLll1LL->getRegistered('ami_clean'); $aMultifeedsModules =$lLll1LL->getRegistered('ami_multifeeds'); foreach ($aMultifeedsModules as $moduleName) {$lLll11I =$lLll1LL->getHyperData($moduleName); if (!empty($lLll11I[1]) && ($moduleName != $lLll11I[1]) && ($moduleName != $lLll11I[1] .'_cat')) {$lLll1L1[] =$moduleName; }}$ILIllII =$Core->Cache->TT1T1l1(); $oRequest =AMI::getSingleton(I18276); $oResponse =AMI::getSingleton('response'); AMI_Registry::set('ami_specblock_mode', true); foreach ($ILIllII as $ILIlIl1 => $vModName) {$bench_time["done init_spec start: " .$lLll11l] =microtime(); $mode ="small"; $Core->SetModProperty($vModName, I18277, $ILIlIl1); $frn->TTITT1l($vModName); $frn->TITlTII($ILIlIl1); $lLll11L =in_array($vModName, $lLll1L1); $lLll111 =false; $lLlLIII =$vModName .I18278; AMI_Registry::set('ami_specblock_id', $ILIlIl1); if ($lLll11L && AMI::isResource($lLlLIII)) {$I11I111 =AMI::getResource($lLlLIII, array($oRequest, $oResponse)); if ($I11I111 && is_callable(array($I11I111, 'getSpecblock'))) {$I11I111->init(); $blockName =AMI::getProperty($vModName, I18277); if (AMI::issetOption($vModName, 'cache_l3_enable') && !AMI::getOption($vModName, 'cache_l3_enable')) {$Core->Cache->TT1Tl1l($blockName); }$res =$I11I111->getSpecblock($blockName); $frn->SetSpecialBlock($blockName, $res); $lLll111 =true; }}AMI_Registry::delete(I18279); if (!$lLll111 && !$lLll11L) {require $GLOBALS['DEFAULT_INCLUDES_PATH'] .$vModName .'.php'; }unset($mode); $bench_time["done init_spec end: " .$lLll11l] =microtime(); }AMI_Registry::delete('ami_specblock_mode'); $Core->Cache->TT1T11T($ILIllII); unset($ILIllII); }$idx =array_search(I18280, $frn->I1II11L); $lLlLIIl =$frn->I1II11L; if ($idx !== false) {unset($lLlLIIl[$idx]); };if ($frn->Core->GetModOption(I18269, I18281)) {$lLlLIIl[] ="spec_main_menu_sub"; }$frn->Core->Cache->TT1TlT1($lLlLIIl, true); $lLlLIIL =Array("page_info" => &$frn->ActivePageInfo); $frn->Core->Cache->TT1II1I($lLlLIIL); if (!$lLll1Ll) {require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .'init_spec_blocks.php'; if (empty($GLOBALS[I18282]["disable_user_scripts"])) {require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .'init_custom_spec_blocks.php'; }}if ($frn->Core->GetModOption(I18269, "include_favicon")) {$frn->Gui->addHeaderTag(I18283, "rel=\"shortcut icon\" href=\"" .$ROOT_PATH_WWW ."favicon.ico\" type=\"image/x-icon\"", "", true); $frn->Gui->addHeaderTag(I18283, "rel=\"icon\" href=\"" .$ROOT_PATH_WWW ."favicon.ico\" type=\"image/x-icon\"", "", true); }if ($frn->Core->GetModOption(I18269, "include_anim_favicon")) {$frn->Gui->addHeaderTag(I18283, "rel=\"shortcut icon\" href=\"" .$ROOT_PATH_WWW ."favicon.gif\" type=\"image/gif\"", I18284, true); $frn->Gui->addHeaderTag(I18283, "rel=\"icon\" href=\"" .$ROOT_PATH_WWW ."favicon.gif\" type=\"image/gif\"", I18284, true); }if ($frn->Core->GetOption('allow_multi_lang')) {$llI1ll1 =false; if (empty($GLOBALS['pageInfo'][I18285])) {$llI1ll1 =$frn->Core->TTlI1T1('pages', 'use_rel_alternate_hreflang'); }elseif (!empty($GLOBALS['pageInfo']['use_hreflang'])) {$llI1ll1 =true; }if ($llI1ll1) {$IILlllL =$frn->Core->GetOption(I18286); foreach ($IILlllL as $lILIllI) {$frn->Gui->addHeaderTag(I18283, "rel=\"alternate\" href=\"" .$ROOT_PATH_WWW .$lILIllI ."/" .$GLOBALS['vGlobVars']['lang_free_script_link'] ."\" hreflang=\"" .$lILIllI .I18287, I18284, true); }$frn->Gui->addHeaderTag(I18283, "rel=\"alternate\" href=\"" .$ROOT_PATH_WWW .$frn->Core->GetOption('default_data_lang') ."/" .$GLOBALS['vGlobVars']['lang_free_script_link'] ."\" hreflang=\"x-default\"", I18284, true); }}$frn->TTITT1l($frn->ActiveModule->GetName(), true); if ($frn->Gui->ForceExport) {require_once($GLOBALS["FUNC_INCLUDES_PATH"] ."func_layout.php"); $frn->TTITlll("all", TlT1TII(I18288, "##[_name_]##", "[_content_]")); }$frn->Gui->addGlobalVars($frn->TTITlI1()); $frn->Gui->useGlobalVarsOnce($frn->TTITllI()); $langFile =$frn->Gui->ParseLangFile('templates/lang/main.lng'); $IlLIl1L =$frn->ActiveModule->GetName(); if('eshop_order_history' == $IlLIl1L){ $IlLIl1L =I18289; }$oDeclarator =AMI_ModDeclarator::getInstance(); $lLlLII1 =in_array($IlLIl1L, array('pages', 'eshop_item', I18289 ));$lLlLIlI =''; $llI11L1 =TRUE; if(!$lLlLII1){ if($oDeclarator->isRegistered($IlLIl1L)){ list($hyper, $config) =$oDeclarator->getHyperData($IlLIl1L); if('ami_multifeeds' == $hyper){ if(in_array($config, array(I18290, 'blog', 'articles', 'photoalbum'))){ $lLlLII1 =TRUE; }}}}$lLlLIll =AMI::isModInstalled($IlLIl1L .'_cat') && AMI::getOption($IlLIl1L, I18291); $categoryId =(string)((empty($frn->Vars['catid']) ?0 :$frn->Vars['catid'])); if(!$lLlLII1){ $lLlLIlL =$IlLIl1L; $IlLIl1L ='pages'; $lLlLII1 =TRUE; $lLlLIll =FALSE; $categoryId ='0'; }if($IlLIl1L == I18292){ $lLlLIll =TRUE; }$itemId =AMI_Registry::get('pages' != $IlLIl1L ?'page/itemId' :'page/id'); if(isset($lLlLIlL)){ $IlLIl1L =$lLlLIlL; }if($oDeclarator->isRegistered($IlLIl1L)){ $lLlLIlI =$oDeclarator->getSection($IlLIl1L); }else{ $lLlLIlI =$frn->Core->GetModule($IlLIl1L)->GetOwnerName(); }$frn->Gui->addHtmlScript( "var DATE_CONVERTION = ['" .jparse($langFile[I18293]) ."', '" .jparse($langFile['yesterday']) ."', '+-[today_date]-+', '+-[yesterday_date]-+'],\r\n" ."amiMobileLayId = '+-[mobile_lay_id]-+',\r\n" .I18294 .$IlLIl1L .I18295 .I18296 .$lLlLIlI .I18295 .I18297 .($lLlLIll ?'true' :'false') .",\r\n" .I18298 .$itemId .I18295 .I18299 .$categoryId .I18295 .I18300 .$ROOT_PATH_WWW .$GLOBALS['vGlobVars'][I18301] ."';" );$lLlLIl1 =$IlLIl1L; if(isset($lLlLIlL)){ $IlLIl1L ='pages'; unset($lLlLIlL); }if($oSession->IssetVar('user')){ $frn->Gui->addHtmlScript("var _amits = '+-[_ts]-+', _amitsh = '+-[_tsh]-+';"); }if($oSession->GetVar(I18302)){ $oUser =AMI::getSingleton('env/session')->getUserData(); if(!$Core->GetUserId()){ $Core->TTlIlIl($oUser->id); }$aRights =$Core->TTllIIT($Core->GetUserId()); if(!$Core->IsSysUser()){ $lLlLII1 =AMI::checkAccessRights( $IlLIl1L, $oUser->id, array('edit') );$llI11L1 =AMI::checkAccessRights('pages', $oUser->id, array('edit')); }else{ $lLlLII1 =true; $llI11L1 =true; }if($llI11L1){ if(AMI_Registry::get(I18303, FALSE) !== FALSE){ $frn->Gui->addHtmlScript(I18304 .AMI_Lib_String::jParse(AMI_Registry::get(I18303)) .'";'); $frn->Gui->addHtmlScript(I18305 .AMI_Registry::get('page/id') .'";'); }}if($lLlLII1){ if(AMI_Registry::get('page/catHeader', FALSE) !== FALSE){ $frn->Gui->addHtmlScript(I18306 .AMI_Lib_String::jParse(AMI_Registry::get(I18307)) .'";'); }}$lLlLILI =($Core->IsSysUser() || (isset($aRights['mod_rights'][$IlLIl1L]) && !empty($aRights['mod_rights'][$IlLIl1L]['admin']) ))?I18308 :'false'; if('single' != $GLOBALS['_h']['mode']){ $url =DEFAULT_ADMIN_PATH_WWW; $domain =preg_replace( I18309, '', parse_url($CONFIG_INI['main']['ROOT_PATH_WWW'], PHP_URL_HOST) );}else{ $url =AMI_Registry::get('path/www_root') .I18310; $domain =''; }$lLlLILl =$IlLIl1L; $lLlLILL =$itemId; if($lLlLIll && $categoryId && !$itemId){ if($lLlLILl == I18292){ $lLlLILl ='eshop_cat'; }else{ $lLlLILl .= '_cat'; }$lLlLILL =$categoryId; }$oMod =$Core->GetModule($lLlLILl); $ts =time(); $lllIlLL =$oMod->GetAdminLink(); if($lLlLILL){ if(in_array($lLlLILl, array('pages', I18311))){ $lllIlLL .= '?id=' .$lLlLILL .('pages' != $lLlLILl ?'&action=edit#anchor' :''); }else{ $lllIlLL .= I18312 .$lLlLILl .'&_amits=' .$ts .'&_amitsh=' .md5($ts .AMI::getSingleton('env/session')->hash) .'&id=' .$lLlLILL .I18313; }}$lLlLIL1 =FALSE; $aVirtualLinks =AMI::getProperty('pages', 'virtual_links'); foreach($aVirtualLinks as $masterModuleName => $aVirtualModules){ if(isset($aVirtualModules[$lLlLIl1])){ $lLlLIL1 =TRUE; break; }}$lLlLI1I =''; if($lLlLIL1){ $llI1LIL =$frn->Gui->parseLangFile(AMI_Skin::getPath("templates/lang/_menu_all.lng")); $lLlLI1I .= I18314 .$llI1LIL[$lLlLIl1] .I18295; $lLlLI1I .= I18315 .$llI1LIL[$masterModuleName] .I18295; $lLlLI1l =AMI_PageManager::getModLink($masterModuleName, AMI_Registry::get('lang')); $lLlLI1I .= "   parentLink:'" .AMI_Registry::get('path/www_root') .$lLlLI1l .I18295; }if(AMI_Registry::get('ami/editMode/discardEditingDetails', FALSE)){ $lLlLI1I .= "   discardEditingDetails: true,\r\n"; }$lLlLI1L =AMI_PageManager::getModLink('members', AMI_Registry::get('lang'), 0, TRUE, TRUE); $lLlLI1I .= "   logoutLink:'" .AMI_Registry::get('path/www_root') .$lLlLI1L ."?action=logout',\r\n"; $lLlLI11 =AMI_Registry::get('AMI/Environment/Session/ahash'); $frn->Gui->addHtmlScript( "var authData = {\r\n" ."   url: '{$url}',\r\n" ."   sid: '{$lLlLI11}',\r\n" ."   domain: '{$domain}',\r\n" ."   admin: 'auth_by_hash.php?domain={$domain}&sid={$lLlLI11}&url=" .rawurlencode($lllIlLL) .I18295 ."   modId: '" .$IlLIl1L .I18295 ."   adminAllowed : {$lLlLILI},\r\n" .I18316 .($lLlLII1 ?I18308 :'false') .I18317 ."   pagesAllowed: " .($llI11L1 ?I18308 :'false') .I18317 ."   rv: " .$Core->TTllI1l('rights_version') .I18317 .$lLlLI1I .I18318 .($lLlLIL1 ?I18308 :'false') ."\r\n" ."};\r\n" );unset($lLlLI11); $llI1LIL =$frn->Gui->parseLangFile(AMI_Skin::getPath("templates/lang/_menu_all.lng")); $lLlLlII =array(I18292, 'eshop_order_history', 'feedback'); $lLlLlIl =array(); foreach($lLlLlII as $lLlLlIL){ if( $oDeclarator->isRegistered($lLlLlIL) && $Core->IsInstalled($lLlLlIL) && $Core->IsPresentInPMandPublic($lLlLlIL) ){$lILIlIl =AMI_PageManager::getModLink($lLlLlIL, AMI_Registry::get('lang'), 0, TRUE, TRUE); $lLlLII1 =AMI::checkAccessRights($lLlLlIL, $oUser->id, array('edit')); if($lLlLII1 && $lILIlIl){ $lLlLlIl[] =array( 'modId' => $lLlLlIL, I18319 => $llI1LIL['hc_' .$lLlLlIL], 'link' => $lILIlIl, 'conf' => $lLlLlIL == I18292 ?'eshop' :($lLlLlIL == I18320 ?I18320 :'orders') );}}}$aConfigs =array(I18290, 'blog', 'articles', 'photoalbum'); foreach($aConfigs as $lLlLlI1){ $aModIds =$oDeclarator->getRegistered(I18321, $lLlLlI1); foreach($aModIds as $lLlLlIL){ if( !$Core->IsInstalled($lLlLlIL) || !$Core->IsPresentInPMandPublic($lLlLlIL) ){continue; }$lLlLllI =AMI_PageManager::getModPages($lLlLlIL, AMI_Registry::get('lang')); foreach($lLlLllI as $lLlLlll){ $lILIlIl =AMI_PageManager::getModLink($lLlLlIL, AMI_Registry::get('lang'), $lLlLlll['id'], TRUE, TRUE); $lLlLII1 =AMI::checkAccessRights($lLlLlIL, $oUser->id, array('edit')); if($lLlLII1 && $lILIlIl){ $lLlLlIl[] =array( I18322 => $lLlLlIL, I18319 => $lLlLlll['name'], 'link' => $lILIlIl, 'conf' => $lLlLlI1 );}}}}$frn->Gui->addHtmlScript(I18323 .json_encode($lLlLlIl)); }unset($IlLIl1L); if($Core->IsInstalled(I18292)){ $oEshop =AMI::getSingleton('eshop'); $lLlLllL =$oEshop->getDefaultCurrencyData(); $frn->Gui->addHtmlScript( "var amiEshopSettings = {\r\n" .'    numberDecimals: "' .$oEshop->getNumberDecimals() .'",' ."\r\n" .'    decimalPoint: "' .$oEshop->getDecimalPoint() .I18324 ."\r\n" .'    thousandsSeparator: "' .$oEshop->getThousandsSeparator() .I18324 ."\r\n" .'    currencyPrefix: "' .(isset($lLlLllL[I18325]) ?$lLlLllL[I18325] :'') .I18324 ."\r\n" .'    currencyPostfix: "' .(isset($lLlLllL['postfix']) ?$lLlLllL[I18326] :'') .'"' ."\r\n" .'};' );if($Core->IsInstalled(I18327)){ $frn->Gui->addHtmlScript("var use_background_cart = '" .$frn->Core->GetModOption(I18327, 'disable_dynamic_specblock') ."';"); $frn->Gui->addHtmlScript("var mark_items_in_cart = " .(int) $frn->Core->GetModOption(I18327, I18328) .";"); }}$frn->Gui->enableGlobalVarsOnce(); if(!empty($frn->Vars['ami_mod_view_type'])){ $IlL1lll['layout_body'] ='##lay_body_body##'; }$Content =$Page->TTll1lI($frn, $ModuleHtml, $IlL1lll, $HtmlBody); unset($HtmlBody); $frn->Gui->disableGlobalVarsOnce(); if ($frn->Core->GetModOption(I18269, I18281) && !in_array(I18329, $lLll1lI)) {$Content =preg_replace("/^(.*)<\\/body/si", "\\1" .$frn->TTITlII(I18329) ."\n</body", $Content, 1); }if(AMI::toolbarEnabled()){ $lLlLll1 =$frn->Gui->Parse(AMI_Skin::getPath("templates/toolbar.tpl"), array(I18330 => $frn->lang)); $Content =preg_replace("/<body(.*)>(.*)/Usi", "<body\\1>" .$lLlLll1 ."\\2", $Content, 1); }EventApplyVars($frn, "page_finalize", $Content); $conn->DisableSign =$frn->Gui->PrintVersion || !empty($frn->Vars[I18331]); $conn->Sign($Content); $conn->TT1I1lI($frn->Core->GetOption("html_protecting"), $Content); if (!$frn->Core->issetAndTrueOption("not_clear_links")) {TlT1T1I($Content); }if ($frn->Core->IsInstalled("adv_places")) {advProcessData($Content); TlTlI11($Content); }$bench_time['done_end'] =microtime(); if (defined(I18332) && (isset($frn->VarsGet["_isrc"]) || isset($frn->VarsGet["_iblock"]))) $frn->Gui->processHtmlDocument($Content, $frn->VarsGet["_isrc"], $frn->VarsGet["_iblock"], $frn->VarsGet[I18333]); if (defined("IS_FIRST_START_STEP2")) {TlTl1Il($frn->Gui); }else {echo $Content; unset($Content); $conn->Out(); }if ($GLOBALS['Ill111L']) {$frn->Core->TTlTTTl('frn.done'); }die; 