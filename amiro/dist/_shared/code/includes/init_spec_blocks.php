<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       15632 xkqwkziyrpmgpykpksmyynuxkpkzzqlluwryzkilkursiltisppuqzwzuqkppgwmusuwpnir
 */ ?><?php foreach(array(18837=>"vZr|nZIQ",18838=>"IHS|nZIQ",18839=>"WJZDDMfMQSD",18840=>"DQZrWO",18841=>"WuDtHI|IHSuJQ",18842=>"CA|SQDMPnD",18843=>"nH|ZSv|GJZWQD",18844=>"LHYD|rQDuIQ",18845=>"nH|DIZJJ|DtMWKQrD",18846=>"|DIZJJ|DGQWMZJ",18847=>"nH|",18848=>"|rQfQrQnWQ|tBGQD",18849=>'IHS|nZIQ',18850=>"DGQW|YJHWKD",18851=>"IZMn",18852=>"DGQW|IZMn|IQnu|DuY",18853=>"",18854=>'',18855=>"DGQW|GZPQ|OQZSQr",18856=>"DGQW|IZMn|IQnu",18857=>"WHIIHn%GZPQ|nQxt",18858=>"JZnP|DQJ|",18859=>'rQDGHnDQ',18860=>'ihsUjq|gmwTURqd|gzTo',18861=>"DIZJJ",18862=>'yjhwk|gRqFmX',18863=>'~IHSuJQ~WHntrHJJQr~frn',18864=>'zim~iHSuJQ~qnvMrHnIQnt~qxtQnDMHn~Qxt|WZtQPHrB~QnZYJQwZtFMJtQr',18865=>'WZWOQ|J3|QnZYJQ',18866=>'ZIM|DGQWYJHWK|IHSQ') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} function TlTlITT(&$frn, &$content, $name) {$lLLll11 =$frn->TITlTlT($name); if (is_array($lLLll11)) {foreach ($lLLll11 as $blockName) {$frn->SetSpecialBlock($blockName, $content); }}$frn->SetSpecialBlock($name, $content); }$lLLlLII =Array( Array("mod_name" => "sectionmap", I18837 => "no_sectionmap"), Array("mod_name" => "news", I18837 => "no_small_news"), Array(I18838 => "blog", I18837 => "no_small_blog"), Array(I18838 => "articles", I18837 => "no_small_articles"), Array(I18838 => I18839, I18837 => "no_small_classifieds"), Array(I18838 => "jobs", I18837 => "no_small_jobs"), Array(I18838 => "photoalbum", I18837 => "no_small_photoalbum"), Array(I18838 => "votes", I18837 => "no_small_votes"), Array(I18838 => "members", I18837 => "no_small_members"), Array(I18838 => I18840, I18837 => "no_quick_search"), Array(I18838 => "subscribe", I18837 => "no_small_subscribe"), Array(I18838 => I18841, I18837 => "no_small_custom"), Array(I18838 => I18842, I18837 => "no_small_wz_designs"), Array(I18838 => "faq", I18837 => "no_small_faq"), Array(I18838 => "adv_places", I18837 => I18843), Array(I18838 => "srv_tags", I18837 => "no_small_tags"), Array(I18838 => "forum", I18837 => "no_small_forum"), Array(I18838 => I18844, I18837 => "no_small_jobs_resume"), Array(I18838 => "relations", I18837 => "no_small_relations"), Array(I18838 => "stickers", I18837 => I18845) );$lLLlLIl =$frn->Core->GetProperty("eshop_clone_owners"); if (!is_array($lLLlLIl)) {$lLLlLIl =Array("eshop"); }foreach ($lLLlLIl as $lLLlLIL) {$ILILl1I =$lLLlLIL ."_home"; $lLLlLI1 ="no_" .$lLLlLIL .I18846; $lLLlLII[] =Array(I18838 => $ILILl1I, I18837 => $lLLlLI1); $ILILl1I =$lLLlLIL ."_item"; $lLLlLI1 ="no_" .$lLLlLIL ."_small_cat"; $lLLlLII[] =Array(I18838 => $ILILl1I, I18837 => $lLLlLI1); $ILILl1I =$lLLlLIL ."_currency"; $lLLlLI1 =I18847 .$lLLlLIL ."_currency"; $lLLlLII[] =Array(I18838 => $ILILl1I, I18837 => $lLLlLI1); $ILILl1I =$lLLlLIL ."_cart"; $lLLlLI1 =I18847 .$lLLlLIL ."_small_cart"; $lLLlLII[] =Array(I18838 => $ILILl1I, I18837 => $lLLlLI1); $ILILl1I =$lLLlLIL ."_reference_types"; $lLLlLI1 =I18847 .$lLLlLIL .I18848; $lLLlLII[] =Array(I18838 => $ILILl1I, I18837 => $lLLlLI1); $ILILl1I =$lLLlLIL ."_compare"; $lLLlLI1 =I18847 .$lLLlLIL ."_compare"; $lLLlLII[] =Array(I18838 => $ILILl1I, I18837 => $lLLlLI1); }if ($frn->Core->IsInstalled('plugins_wizard')) {$IlI1l11 =&CMS_InstallablePlugin::TTI1IlT($cms); foreach (array_keys($IlI1l11) as $modName) {$file =$frn->Core->GetModOption($modName, 'specblock'); if (!empty($file)) {$lLLlLII[] =Array(I18838 => $modName, I18837 => I18847 .$modName); }}}$lLll1LL =AMI_ModDeclarator::getInstance(); $lLLlLlI =array(); foreach ($lLLlLII as $aData) {$lLLlLlI[] =$aData[I18849]; }$lLll1L1 =$lLll1LL->getRegistered('ami_clean'); $aMultifeedsModules =$lLll1LL->getRegistered('ami_multifeeds'); foreach ($aMultifeedsModules as $moduleName) {$lLll11I =$lLll1LL->getHyperData($moduleName); if (!empty($lLll11I[1]) && ($moduleName != $lLll11I[1]) && ($moduleName != $lLll11I[1] .'_cat')) {$lLll1L1[] =$moduleName; }}foreach ($lLll1L1 as $moduleName) {if (!in_array($moduleName, $lLLlLlI)) {if (AMI::issetProperty($moduleName, "spec_blocks")) {$aBlocks =AMI::getProperty($moduleName, I18850); foreach ($aBlocks as $blockName) {$lLLlLII[] =array(I18838 => $moduleName, I18837 => I18847 .$blockName); }}}}unset($lLLlLlI); unset($ILILl1I); unset($lLLlLI1); unset($lLLlLIl); unset($lLLlLIL); $lLLlLll =sizeof($lLLlLII); $lLLlLlL =Array(); $lLLlLl1 =Array(); for ($lLLlLLI =0; $lLLlLLI <$lLLlLll; $lLLlLLI++) {$module_name =$lLLlLII[$lLLlLLI][I18838]; $lLLlLLl =(!isset($GLOBALS[$lLLlLII[$lLLlLLI][I18837]]) || $GLOBALS[$lLLlLII[$lLLlLLI][I18837]] != "1"); if ($frn->Core->IsFrontAllowed($module_name) && $lLLlLLl) {$aBlockNames =$frn->Core->GetModProperty($module_name, I18850); foreach ($aBlockNames as $lLLlLLL) {$lLLlLL1 =$frn->TITlTlT($lLLlLLL); if (!is_array($lLLlLL1)) {$lLLlLL1 =Array(); }if ($frn->SpecBlockFound($lLLlLLL)) {$lLLlLL1[] =$lLLlLLL; }foreach ($lLLlLL1 as $lLll11l) {$lLLlLl1[$lLll11l] =$module_name; }$lLLlLlL =array_merge($lLLlLlL, $lLLlLL1); }}}unset($lLLlLLL); unset($lLLlLL1); unset($lLLlL1I); unset($lLLlLII); if (isset($frn->Vars["pageId"])) {$lLLlL1l =$frn->Vars["pageId"]; }else {$lLLlL1l =$pageId; }$lLLlL1L =Array( "spec_main_menu" => I18851, "spec_top_menu" => "top", "spec_bottom_menu" => "bottom" );$lLLlL11 =Array( I18852 => "", "spec_prev_next" => "", "spec_page_header" => I18853 );foreach ($lLLlL1L +$lLLlL11 as $lLLl1II => $tmp) {if ($frn->SpecBlockFound($lLLl1II)) {$lLLl1Il =true; $Core->Cache->TT1TI1l("pageId", $lLLlL1l, $lLLl1II); }else {$lLLl1Il =false; }$lLLl1IL =$frn->TITlTlT($lLLl1II); if (is_array($lLLl1IL) && sizeof($lLLl1IL) >0) {$lLLl1Il =$lLLl1Il || true; foreach ($lLLl1IL as $lLLl1I1) {$Core->Cache->TT1TI1l("pageId", $lLLlL1l, $lLLl1I1); }}else {$lLLl1Il =$lLLl1Il || false; }if (!$lLLl1Il) {if (isset($lLLlL1L[$lLLl1II])) {unset($lLLlL1L[$lLLl1II]); }else {unset($lLLlL11[$lLLl1II]); }}}$lLLl1lI =$Core->Cache->TT1T1lT(); if (sizeof($lLLl1lI) >0) {$lLLlLlL =array_diff($lLLlLlL, $lLLl1lI); }$pMenu =new Page($frn); $lLLl1ll =$pMenu->tree->getDefaultPageIds(); $lLLl1lL =$frn->PManager->GetOption("separate_submenues"); $lLLl1l1 =array('submenues' => I18854); foreach ($lLLlL1L as $lLLl1LI => $lLLl1Ll) {$Core->Cache->TT1TI1l("pageId", $lLLlL1l, $lLLl1LI); if (!isset($lLLl1lI[$lLLl1LI])) {$aMenu =$pMenu->TTll1TT($lLLl1ll[$frn->lang], $lLLlL1l, $lLLl1Ll, $lLLl1lL && $lLLl1Ll == 'main'); if ($lLLl1Ll == 'main') {$lLLl1l1 =$aMenu; }TlTlITT($frn, $aMenu[$lLLl1Ll ."_menu"], $lLLl1LI); }}if (isset($lLLlL11[I18855])) {if (!empty($ModuleHtml["page_header"])) {$content =$frn->Gui->getAbs("common:page_header", "content", $ModuleHtml["page_header"]); TlTlITT($frn, $content, I18855); unset($content); }}if (isset($lLLlL1L[I18856]) && !isset($lLLl1lI[I18856]) && $lLLl1lL) {TlTlITT($frn, $lLLl1l1["submenues"], I18852); }unset($lLLl1l1, $lLLl1lL, $lLLlL1L); if (isset($lLLlL11["spec_prev_next"]) && !isset($lLLl1lI["spec_prev_next"])) {$lLLl1LL =array(); $aNext =$pMenu->TTll1II($lLLlL1l); if ($aNext !== false) {$lLLl1LL["next"] =$frn->Gui->get(I18857, $aNext); }$aPrev =$pMenu->TTll1IT($lLLlL1l); if ($aPrev !== false) {$lLLl1LL["prev"] =$frn->Gui->get("common:page_prev", $aPrev); }if ($aNext !== false && $aPrev !== false) {$lLLl1LL["splitter"] =$frn->Gui->getAbs("common:page_prev_next_splitter"); }$content =$frn->Gui->get("common:page_prev_next", $lLLl1LL); TlTlITT($frn, $content, "spec_prev_next"); unset($content); }if ($frn->Core->GetOption("allow_multi_lang")) {if ($frn->SpecBlockFound("spec_lang_select")) {$lLLl1L1 =true; }else {$_tmp =$frn->TITlTlT("spec_lang_select"); $lLLl1L1 =!empty($_tmp); unset($_tmp); }if ($lLLl1L1) {$lLLl11I =I18858 .$frn->lang_data; $lLLl11l[$lLLl11I] ="selected"; $content =$frn->Gui->get("common:lang_select_form", $lLLl11l); TlTlITT($frn, $content, "spec_lang_select"); unset($content); }}unset($lLLl1lI); global $db; $oRequest =AMI::getSingleton('env/request'); $oResponse =AMI::getSingleton(I18859); AMI_Registry::set('ami_specblock_mode', true); AMI_Registry::set('lang', $frn->lang_data); AMI_GlobalFilters::setGlobalFilter('side'); AMI_Registry::set('CUSTOM_PICTURES_HTTP_PATH', "_mod_files/ce_images/"); AMI_Registry::set(I18860, AMI_Registry::get('path/root') ."_mod_files/"); AMI_Registry::set('LOCAL_FILES_REL_PATH', "_local/"); $lLLlLlL =array_unique($lLLlLlL); foreach ($lLLlLlL as $lLll11l) {$mode =I18861; $module_name =$lLLlLl1[$lLll11l]; $lLll11L =in_array($module_name, $lLll1L1); if (!empty($GLOBALS['sys']['disable_user_scripts']) && preg_match('/^plugin_(\d+)$/', $module_name, $m)) {if ($lLll11L ){continue; }}$Core->SetModProperty($module_name, "active_spec_blocks", $lLll11l); $frn->TTITT1l($module_name); $frn->TITlTII($lLll11l); $frn->Gui->addGlobalVars(array(I18862 => $lLll11l)); $bench_time["init_spec start: " .$lLll11l] =microtime(); $lLll111 =false; AMI_Registry::set('ami_specblock_id', $lLll11l); $lLlLIII =$module_name .I18863; if ($lLll11L && AMI::isResource($lLlLIII)) {AMI_Registry::set(I18864, TRUE); $I11I111 =AMI::getResource($lLlLIII, array($oRequest, $oResponse)); if ($I11I111 && is_callable(array($I11I111, 'getSpecblock'))) {$I11I111->init(); $blockName =AMI::getProperty($module_name, "active_spec_blocks"); if (AMI::issetOption($module_name, I18865) && !AMI::getOption($module_name, I18865)) {$Core->Cache->TT1Tl1l($blockName); }$res =$I11I111->getSpecblock($blockName); $frn->SetSpecialBlock($blockName, $res); $lLll111 =true; }unset($I11I111); AMI_Registry::delete(I18864); }AMI_Registry::delete('ami_specblock_id'); if (!$lLll111 && !$lLll11L) {require $GLOBALS['DEFAULT_INCLUDES_PATH'] .$module_name .'.php'; }$bench_time["init_spec end: " .$lLll11l] =microtime(); }AMI_Registry::delete(I18866); unset($lLll11l); unset($lLLl11L); unset($lLLlLlL); unset($lLLlLl1); unset($mode); if ($frn->Core->GetOption("demo_mode")) {$m =59 -date("i"); $s =59 -date("s"); $frn->Gui->addHtmlScript("var clockM = $m;"); $frn->Gui->addHtmlScript("var clockS = $s;"); }