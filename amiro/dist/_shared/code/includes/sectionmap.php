<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       3525 xkqwzltntklkkupszzgrnqmtpusqzlirxislqlxzwnmpiiugwxymwlymysgurkgpxrikpnir
 */ ?><?php foreach(array(19130=>'MnMt`GOG',19131=>"DQWtMHnIZG",19132=>"GZPQmS",19133=>'!',19134=>"MS",19135=>"uDQ|DMtQIZG|fMJtQr",19136=>"ZWtMvQ|DGQW|YJHWKD",19137=>'SHnQ`GOG') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $lLI111I =0; if(isset($mode)&&$mode=="small"){ $lLI111I =1; }if(!$lLI111I){ require_once $GLOBALS['DEFAULT_INCLUDES_PATH'] .I19130; }$lLLL1lL =""; $lLLL1l1 =&$frn->Core->GetModule("sectionmap"); $frn->Gui->addBlock("tree", $lLLL1l1->GetOption("tree_template")); $frn->Gui->addBlock(I19131, "templates/sectionmap.tpl"); $tree =&Tree::getInstance($frn); $tree->lang_data =$lang_data; $tree->ll1IlLL =true; $tree->UseHidden =true; $tree->ll1Il1I =false; $tree->UseModLinks =true; $tree->ll1Il1L =true; $tree->ll1Il11 =false; $tree->UseScriptLinks =true; $tree->ll1ILIl =false; $lLLL1LI =$tree->getDefaultPageIds(); $tree->ll1ILLl =$lLLL1l1->GetOption("deep_level"); $tree->ll1IL11 =$lLLL1l1->GetOption('draw_tree_images'); $tree->TI1l1II($lLLL1l1->GetOption("splitter_period")); $activePage =$frn->Vars[I19132]; if(!$lLI111I || (isset($frn->Vars[I19132]) && $frn->Vars[I19132]>0)){ $lLLL1Ll =$lLLL1LI[$frn->lang]; $tree->ItemSimpleFields[] ='all_parents'; $IlLLLL1 =$tree->TI11TlI($activePage, 1); if(isset($IlLLLL1['all_parents']) && !empty($IlLLLL1['all_parents'])){ $lLLL1LL =$IlLLLL1['all_parents'] .I19133 .$IlLLLL1['id']; $aParents =explode(I19133, $lLLL1LL); $sql ="select id, parent_id, is_section from cms_pages where id in (". $lLLL1LL .") ".$tree->_ApplyFilters(); $tree->db->query($sql); $aPages =array(); while($tree->db->next_record()){ $aPages[$tree->db->Record['id']] =$tree->db->Record; }$lLLL1Ll =$aPages[(int)$aParents[0]][I19134]; for($i=count($aParents)-1;$i>=0;$i--){ $pId =(int)$aParents[$i]; if($aPages[$pId]["is_section"] == "1"){ $lLLL1Ll =$aPages[$pId][I19134]; break; }elseif($aPages[$pId][I19134]){ $lLLL1Ll =$aPages[$pId][I19134]; }}}else{ while( isset($IlLLLL1[I19134]) && ($IlLLLL1[I19134]>0) ){$lLLL1Ll =$IlLLLL1[I19134]; if($IlLLLL1["is_section"]=="1"){ break; }$IlLLLL1 =$tree->getParent($IlLLLL1[I19134], 1); }}$tree->ll1ILIl =$lLLL1l1->GetOption(I19135); $tree->TI11TT1($lLLL1Ll, $activePage, ""); }EventApplyVars($frn, "section_map", $tree->table); if($lLI111I){ $lLLL1lL =$frn->Gui->getAbs("sectionmap:small_block", "data", $tree->table); if($lLLL1l1->issetProperty(I19136)){ $frn->SetSpecialBlock($lLLL1l1->GetProperty(I19136), $lLLL1lL); }elseif($lLLL1l1->issetProperty("spec_blocks")){ $frn->SetSpecialBlock($lLLL1l1->GetProperty("spec_blocks"), $lLLL1lL); }}else{ $HtmlBody .= $frn->Gui->getAbs(I19131, "data", $tree->table); require $GLOBALS['DEFAULT_INCLUDES_PATH'] .I19137; }$lLI111I =0; ?>
