<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       6067 xkqwzrilspiqxsgunzysmsqkrwsspgwnypsuimglxqtwgunztmppgurygkzxgtgnkmsspnir
 */ ?><?php foreach(array(19629=>"qDOHGUDQr",19630=>'ZutOHrMAQ',19631=>'~SrMvQr`GOG',19632=>'fQQ|Wurr',19633=>'DQJQWt?SMDZYJQS|JZnPuZPQD!?fQQ|GQrWQnt!?fQQ|WHnDt!?fQQ|Wurr!?DQttMnPD?frHI?WID|GZB|SrMvQrD?COQrQ?MD|MnDtZJJQS?ZnS?nZIQ="',19634=>'fQQ|WHnDt',19635=>'qDOHGFrHnt`GOG',19636=>"MS",19637=>"MtQI",19638=>"WJZDD",19639=>'wid|qxtiHSuJQ`GOG',19640=>"WZWOQ",19641=>"WHunt|ZJJ",19642=>"DMAQ") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} function CreateCart(&$frn, &$oSession) {global $sess_user_name, $sess_cart_name; CreateMember($frn, $oSession, I19629); if(!is_object($frn->Member->Cart) || empty ($frn->Member->Cart->cms) || !is_object($frn->Member->Cart->cms) || get_class($frn->Member->Cart->cms) != 'Cart') {require_once $GLOBALS['CLASSES_PATH'].'Cart.php'; if($oSession->IssetVar($sess_cart_name)) {$frn->Member->Cart =$oSession->GetVar($sess_cart_name); $frn->Member->Cart->cms =&$frn; $frn->Member->Cart->vid =AMI_Registry::get('vid', FALSE); $frn->Member->Cart->simpleInit(); }else {$frn->Member->Cart =new Cart($frn); }}}function TlTll1T($driverName, $oGui, $lL1lLII, $dbTablePrefix, $lang_data){ if(isset($GLOBALS['BILLING_DRIVERS_ALIASES'][$driverName])){ require_once $GLOBALS['CLASSES_PATH'] .'bill_' .($driverName == 'webmoney' ?'wm' :($driverName == I19630 ?'billing' :$driverName)) .'.php'; }require_once $GLOBALS['LOCAL_FILES_PATH'] .'eshop/pay_drivers/' .$driverName .I19631; $lLlLLlI =new BILL_services($oGui, $driverName, $dbTablePrefix); $lLlLLlI->TlTTlll($lL1lLII->GetOption("test_mode")); $aOptions =TlTll1I($GLOBALS['db'], $driverName); $lLlLLlI->TlTTllI($aOptions['fee_percent'], $aOptions['fee_const'], $aOptions[I19632]); return $lLlLLlI; }function TlTll1I(&$db, $driverName){ $sql =I19633 .$driverName .'"'; $db->query($sql); if($db->next_record()){ $aResult =@unserialize($db->Record['settings']); if(!is_array($aResult)){ $aResult =array(); }$aResult['fee_percent'] =$db->Record['fee_percent']; $aResult[I19634] =$db->Record[I19634]; $aResult[I19632] =$db->Record[I19632]; $aResult['disabled_languages'] =explode(',', $db->Record['disabled_languages']); }else{ $aResult =array(); }return $aResult; }function TlTll1l(&$frn, &$lLlLLI1, &$lLlLLlI, $driverName, $lang_data, $dbTablePrefix) {$lLlLLlI =TlTll1T($driverName, $frn->Gui, $lLlLLI1, $dbTablePrefix, $lang_data); }function CreateEshop(&$frn, $lL1lLIl =false) {if(!is_object($frn->Eshop)) {require_once $GLOBALS['CLASSES_PATH'] .I19635; $frn->Eshop =new EshopFront($frn, $NONE); }if($lL1lLIl) {$frn->Eshop->init($frn->getWorkingModuleName()); if($frn->Core->IsInstalled("srv_multi_sites") && $frn->ActiveModule->issetAndTrueOption("multi_site")) {$m =$frn->Core->GetModule("srv_multi_sites"); $siteId =intval($frn->Core->GetModOption("srv_multi_sites", I19636)); $frn->Eshop->TT1l11l(true, $siteId); }}}function TlTll11($propId, &$ILLl1L1, &$aPropInfo, $guiBlockName) {$res =""; if($propId != "0" && is_object($ILLl1L1)) {$propData =array("desc_arr" => &$aPropInfo, "propPref" => I19637, "blockName" => $guiBlockName); $aPropRes =Array(); $aNone =Array(); $ILLl1L1->ProcessAction($a ="get_prop_desc_by_arr", 0, $aNone, $propData, $aPropRes); $res =$aPropRes["desc"]; }return $res; }function &createEshopExtensionObject(&$cms) {$oExt =false; $aExt =array("ext_eshop_custom_fields"); foreach($aExt as $IIlLIIl){ if($cms->Core->IsInstalled($IIlLIIl)) {$IILII1L =&$cms->Core->GetModule($IIlLIIl); if($IILII1L->IssetProperty(I19638)) {$className =$IILII1L->GetProperty(I19638); require_once $GLOBALS['CLASSES_PATH'] .I19639; require_once $GLOBALS['CLASSES_PATH'] .$className. '.php'; $oExt =new $className(); $none =false; $oExt->Init($cms, $none, $none); }}}return $oExt; }function setCartSessionVar($keepErrors, $oCart =null) {global $sess_cart_name, $oSession; if(!is_object($oCart)) {$oCart =&$GLOBALS["oCart"]; }$oCart->onSerialize($keepErrors); $oSession->SetVar($sess_cart_name, $oCart); $I11IlL1 =I19640; $IllIILl =Array(); if($oSession->IssetVar($I11IlL1)) {$IllIILl =$oSession->GetVar($I11IlL1); }$IllIILl["empty_cart"] =$oCart->isEmpty; $oSession->SetVar($I11IlL1, $IllIILl); }function TlTl1TT(&$db, $cId, $langData, $dbTablePrefix) {$res =Array("count"=>0, "size"=>0); $sql ="SELECT count(id) AS num, sum(active) as num_all, sum(if(filesize<0, 0, filesize)*active) AS size, sum(if(filesize<0, 1, 0)*active) AS undefined_size FROM ".$dbTablePrefix."_files WHERE id_product='".$cId."' AND lang='".$langData."' GROUP BY id_product"; $db->query($sql); if($db->next_record()) {$res["count"] =$db->Record["num"]; $res[I19641] =$db->Record["num_all"]; if($db->Record["undefined_size"]) {$res["size"] =-1; }else {$res["size"] =$db->Record[I19642]; }}return $res; }?>
