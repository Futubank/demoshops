<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       3698 xkqwpsirtzrikqzlnyrsuuxtkugpumqugrxswrqmwlqqssqsswxkzrkkgwgrqpntnmlppnir
 */ ?><?php foreach(array(19681=>"C",19682=>"ItMIQ",19683=>'RhhT|gzTo|ccc') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} $lL1LIl1 =array(); $lL1LILI =false; function saveImagesIndexFile($I1I1Ll1,$lL1lLl1,$lL1LILl){ global $lL1LIl1; $fp =@fopen($lL1lLl1, I19681); if($fp){ fwrite($fp, $lL1LILl); fwrite($fp, serialize($lL1LIl1[$I1I1Ll1])); fclose($fp); @chmod($lL1lLl1,0666); }}function getDirOnlyOneImageParameters($I1I1Ll1,$imageFile){ global $lL1LIl1; global $lL1LILI; $lL1lLl1 ='_index_img_file.dat_'; $I1I1Ll1 =rtrim($I1I1Ll1, "/\\"); $lL1lLl1 =$I1I1Ll1."/".$lL1lLl1; $fs =@stat($I1I1Ll1); if(!isset($lL1LIl1[$I1I1Ll1])){ $lL1LIl1[$I1I1Ll1] =array(); if(file_exists($lL1lLl1)){ $fp =@fopen($lL1lLl1, "r"); if($fp){ $lastTime =fread($fp, mb_strlen($fs[I19682])); if($lastTime==$fs[I19682]){ $len =filesize($lL1lLl1)-mb_strlen($fs[I19682]); if ($len >0){ $lL1LIl1[$I1I1Ll1] =unserialize(fread($fp, $len)); }}}@fclose($fp); }}if(!isset($lL1LIl1[$I1I1Ll1]) or !isset($lL1LIl1[$I1I1Ll1][$imageFile])){ $lL1LILL =@getImageSize($I1I1Ll1.'/'.$imageFile); $lL1LIl1[$I1I1Ll1][$imageFile] =array($lL1LILL[0],$lL1LILL[1],$lL1LILL[2]); if(!$lL1LILI){ register_shutdown_function('saveImagesIndexFile',$I1I1Ll1,$lL1lLl1,$fs[I19682]); $lL1LILI =true; }}return $lL1LIl1[$I1I1Ll1][$imageFile]; }function imageGetSize($path){ global $cms; $imgDir =dirname($path); $imgFile =basename($path); $res =null; $res =getDirOnlyOneImageParameters($imgDir,$imgFile); if(!$res){ $res =@getImageSize($path); }if (is_array($res) || !is_object($cms) || mb_substr($path, -18 == '/_index_file.dat_') || mb_substr($path, -12) == '.placeholder'){ return $res; }static $email, $gui; if(!isset($email)){ $email =$cms->Core->GetOption('errors_notification_email'); }if($email){ if(!$gui){ $gui =new GUI_template(); }$gui->addBlock('_error_notification', $GLOBALS["LOCAL_FILES_REL_PATH"] .'_admin/templates/letters/_error_notification.tpl'); $data =array( 'title' => $GLOBALS[I19683], 'url' => $GLOBALS[I19683] .mb_substr(getenv('REQUEST_URI'), 1), 'image_path' => $path );$subject =$gui->get('_error_notification:subject', $data); $body =$gui->get('_error_notification', $data); @mail($email, $subject, $body); }return $res; }