<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @size       2798 xkqwxwnqussnpxyzkwupiqlgxsutqrgpiztyymqsgzzuktqlmkqpkmpwrusyglllmplmpnir
 */ ?><?php foreach(array(19819=>'wjzddqd|gzTo',19820=>"?ZJrQZSB?SHnQ") as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} if(!defined('AMI_ENVIRONMENT')){header('HTTP/1.0 403 Forbidden');die('Forbidden, invalid URL! '.__FILE__.' at '.__LINE__);} $lL11LII =($MULTI_SITE_ID >0) ?UPDATE_NUM."_".$MULTI_SITE_ID :UPDATE_NUM; if($Core->ReadOption($tmp, "cms_updates_history", $lL11LII)) {AMI::addResourceMapping(require($GLOBALS[I19819] .'/60/resourceMapping.php')); AMI::getSingleton('db', array('ami_db' => $db)); trigger_error("Update ".$lL11LII.I19820,E_USER_ERROR); }@header('Content-Type: text/plain'); $CURRENT_UPDATE_PATH =$UPDATES_PATH.UPDATE_NUM.'/'; $Il1lIll =0; if(file_exists($CURRENT_UPDATE_PATH."pre_update2.php")) {AMI::addResourceMapping(require_once($GLOBALS[I19819] .'/60/resourceMapping.php')); AMI_Registry::set('ami_allow_model_save', true); require_once($CURRENT_UPDATE_PATH."pre_update2.php"); }include $CURRENT_UPDATE_PATH.'run.php'; include($CURRENT_UPDATE_PATH."update_final.php"); if(UPDATE_WRITE_NUM) {$lL11LII =($MULTI_SITE_ID >0) ?UPDATE_NUM."_".$MULTI_SITE_ID :UPDATE_NUM; if(!$Core->WriteOption("cms_updates_history", $lL11LII, "result=1",$tmp='')) die("500 ERROR Cannot write option cms_updates..."); }if($Il1lIll >0) {print "500 ERROR details in log\n"; }else {echo "200 OK update done\n"; }exit; ?>