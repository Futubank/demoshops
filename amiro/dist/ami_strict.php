<?php /**
 * @copyright  2000-2016 Amiro.CMS. All rights reserved. 
 * @version    $Id$ 
 * @since      7.0.0 
 * @size       5098 xkqwiikuiyzuplulwinwsyxxgklrpglpttwwgmyxustynrsixlkiwlkpqnlxwqpirkurpnir
 */ ?><?php foreach(array(45=>'dqRVqR|gRhThwhj',46=>'?400?yZS?RQEuQDt',47=>'rQDGHnDQ|IHSQ',48=>'IHSQ',49=>'ZIM|MD|DBD',50=>'Mnt',51=>'SMDZYJQ|WZWOQ',52=>'ZIM|YrHCDQr|WZWOQ',53=>'vZJuQVZJMSZtHr',54=>'DtrMnP',55=>'WHnvQrtTH',56=>'QntrBgHMntNZIQ',57=>'tZrPQt',58=>"mnvZJMS?vZJuQ?Hf?'",59=>'MnWJuSQD',60=>'zim|zjjhc|jhwzj|ihsUjqd',61=>'|JHWZJ~IHSuJQD~WHSQ~',62=>'rQDGHnDQ',63=>'~truDtQS|DQrvMWQ') as $i1=>$i2){$i3=strrev("rtrts");define("I".$i1,$i3($i2,'abcdeghijklmopqswyz ~`!@#%^&*()_-+|{}[];:<>,./?ABCDEGHIJKLMOPQSWYZ','ZYWSQPOMLKJIHGEDCBA?/.,><:;][}{|+-_)(*&^%#@!`~ zywsqpomlkjihgedcba'));} $l1II1LL =@getenv(I45); if(!$l1II1LL){ $l1II1LL ='HTTP/1.1'; }$l1L1ILI =isset($_REQUEST['ami_svc']) && is_string($_REQUEST['ami_svc']) ?trim($_REQUEST['ami_svc']) :NULL; if(is_null($l1L1ILI)){ header($l1II1LL .I46); header('Status: 400 Bad Request'); die("Invalid or missing obligatory 'ami_svc' parameter!"); }$AMI_ENV_SETTINGS =array( 'mode' => 'full', I47 => 'JSON', 'skip_disable_user_scripts' => TRUE );$AMI_ENV_LIMITS =array(); foreach( array( 'ami_env' => array( 'entryPointName' => I48, 'convertTo' => array('string'), 'valueValidator' => '/^(?:fast|full)$/' ),I49 => array( 'entryPointName' => 'skip_disable_user_scripts', 'convertTo' => array('bool', I50), 'valueValidator' => '/^(?:0|1)$/' ),'ami_is_cached' => array( 'entryPointName' => I51, 'convertTo' => array('not'), 'valueValidator' => '/^(?:0|1)$/' ),I52 => array( 'entryPointName' => 'browser_cache', 'convertTo' => array('bool', I50), I53 => '/^(?:0|1)$/' ),'ami_resp_mode' => array( 'entryPointName' => I47, 'convertTo' => array(I54), I53 => '/^(?:JSON|HTML)$/' ),'ami_is_buffered' => array( 'entryPointName' => 'response_buffered', I55 => array('bool') ),'ami_limit_inc' => array( 'target' => 'AMI_ENV_LIMITS', I56 => 'includes', I55 => array(I50) ),'ami_locale' => array( I56 => 'locale', I53 => '/^[a-z][a-z]$/' ),)as $l1L1ILl => $l1L1ILL ){if(!isset($_REQUEST[$l1L1ILl])){ continue; }$l1L1IL1 =isset($l1L1ILL[I57]) ?$l1L1ILL[I57] :'AMI_ENV_SETTINGS'; $_value =$_REQUEST[$l1L1ILl]; if(isset($l1L1ILL[I55])){ foreach($l1L1ILL[I55] as $l1L1I1I){ switch($l1L1I1I){ case I50: $_value =(int)$_value; break; case I54: $_value =(string)$_value; break; case 'bool': $_value =(bool)$_value; break; case 'not': $_value =!$_value; break; }}}if(isset($l1L1ILL[I53])){ if(!preg_match($l1L1ILL[I53], $_value)){ header($l1II1LL .I46); header('Status: 400 Bad Request'); die(I58 .$l1L1ILl ."' parameter!"); }}$GLOBALS[$l1L1IL1][$l1L1ILL[I56]] =$_value; }unset($l1L1ILl, $l1L1ILL, $l1L1IL1, $_value); if('JSON' == $AMI_ENV_SETTINGS[I47]){ $AMI_ENV_SETTINGS[I51] =TRUE; }if( 'ami_skin_tools' == $l1L1ILI && 'fast' == $AMI_ENV_SETTINGS[I48] ){$AMI_ENV_LIMITS += array( I59 => 30, 'mem_usage' => 6 *1024 *1024, 'peak_mem_usage' => 6 *1024 *1024 );}require_once 'ami_env.php'; if( empty($GLOBALS['sys']['disable_user_scripts']) || defined(I60) ){AMI_Service::addAutoloadPath($ROOT_PATH .I61); }if( !AMI::validateModId($l1L1ILI) || !AMI::isResource($l1L1ILI .'/trusted_service') ){$_message ="Unknown service '" .$l1L1ILI ."' requested!"; trigger_error($_message); if(AMI::isResource('response')){ $l1L1I1l =AMI::getSingleton(I62); $l1L1I1l->start(); $l1L1I1l->HTTP->deleteHeader200(); $l1L1I1l->HTTP->addHeader($l1II1LL .' 501 Not Implemented'); $l1L1I1l->HTTP->addHeader('Status: 501 Not Implemented'); $l1L1I1l->write($_message); $l1L1I1l->send(); }else{ header($l1II1LL .' 501 Not Implemented'); header('Status: 501 Not Implemented'); die($_message); }}$l1L1I1l =AMI::getSingleton(I62); $l1L1I1l->sleep(100000); $l1L1I1l->start(); call_user_func( array( AMI::getResource($l1L1ILI .I63), 'dispatchAction' ));$l1L1I1l->send(); 